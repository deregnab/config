!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t,n){e.exports=n(1)(6)},function(e,t){e.exports=related},function(e,t,n){n(3),n(0),n(4),function(e){e.filter("listedTreeFilter",["filterFilter","Nodes",function(e,t){return function(n,r){if(!r)return n;var o=[];return angular.forEach(n,function(n){var i=n.data.key,a=t.get(i);e([a],r).length&&o.push(n)}),o}}]),e.filter("listedTreeSort",["Nodes","Container",function(e,t){return function(n,r){var o=new t(n),i=r.sortBy,a=r.reverse,l=r.data[i]?function(t){return e.get(t.data.key)[i]||""}:function(e){return e.data.value[i]||""},s=o.sortBy(l);return a&&s.reverse(),s}}]),e.filter("relativeTimestamp",function(){return function(e){return moment(new Date(e)).fromNow()}}).filter("absoluteTimestamp",function(){return function(e){return moment(e).format("MMM DD, YYYY [at] h:mm a")}}),e.filter("numberAbbreviate",function(){var e=new NumberAbbreviate;return function(t){return e.abbreviate(t,1)}}),e.filter("trustAsResourceUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),e.filter("treeNodeFilter",["filterFilter","Nodes",function(e,t){return function(n,r){if(!r)return!1;var o=n.data.key,i=t.get(o);return!!e([i],r).length}}]),e.filter("www",function(){return function(e){return e&&"www"==e.slice(0,3)?e.slice(4):e}})}(angular.module("tnFilters",[])),function(e){var t=function(){function e(e,t){this.treesConfig=e,this.treeProperty=t,this.storage=localStorage,this._zoom=parseFloat(this.storage.getItem("defaultZoom"))||1,this._treeLayout="true"==this.storage.getItem("defaultTreeLayout"),this._treeSort=this.storage.getItem("defaultTreeSort")||"timestamp",this._treesSort=this.storage.getItem("defaultTreesSort")||this.treeProperty[this.treeProperty.modified],this._maxTreeDepth=parseInt(this.storage.getItem("defaultMaxTreeDepth"))||6,this._maxTreeBreadth=parseInt(this.storage.getItem("defaultMaxTreeBreadth"))||4,this._session_disabled="true"==this.storage.getItem("sessionDisabled"),this._hide_pinned="true"==this.storage.getItem("hidePinned"),this._hide_bookmarks="true"==this.storage.getItem("hideBookmarks"),this._hideLastTree="true"==this.storage.getItem("hideLastTree"),this._shareUrlWarningDisabled="true"==this.storage.getItem("shareUrlWarningDisabled"),this._reportGoogleDisabled="true"==this.storage.getItem("reportGoogleDisabled"),this._contentLanguage=this.storage.getItem("contentLanguage"),this._autoplayOff="true"==this.storage.getItem("autoplayOff"),this._announcement1="true"==this.storage.getItem("announcement1")}return Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this.storage.setItem("defaultZoom",e.toString()),this._zoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeLayout",{get:function(){return this._treeLayout},set:function(e){this.storage.setItem("defaultTreeLayout",e.toString()),this._treeLayout=e,this.treesConfig.treeCtrl.vertical=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeSort",{get:function(){return this._treeSort},set:function(e){this.storage.setItem("defaultTreeSort",e),this._treeSort=e,this.treesConfig.treeCtrl.sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treesSort",{get:function(){return this._treesSort},set:function(e){this.storage.setItem("defaultTreesSort",e),this._treesSort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeDepth",{get:function(){return this._maxTreeDepth},set:function(e){this.storage.setItem("defaultMaxTreeDepth",e.toString()),this._maxTreeDepth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeBreadth",{get:function(){return this._maxTreeBreadth},set:function(e){this.storage.setItem("defaultMaxTreeBreadth",e.toString()),this._maxTreeBreadth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionDisabled",{get:function(){return this._session_disabled},set:function(e){this.storage.setItem("sessionDisabled",e.toString()),this._session_disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidePinned",{get:function(){return this._hide_pinned},set:function(e){this.storage.setItem("hidePinned",e.toString()),this._hide_pinned=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideBookmarks",{get:function(){return this._hide_bookmarks},set:function(e){this.storage.setItem("hideBookmarks",e.toString()),this._hide_bookmarks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLastTree",{get:function(){return this._hideLastTree},set:function(e){this.storage.setItem("hideLastTree",e.toString()),this._hideLastTree=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareUrlWarningDisabled",{get:function(){return this._shareUrlWarningDisabled},set:function(e){this.storage.setItem("shareUrlWarningDisabled",e.toString()),this._shareUrlWarningDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reportGoogleDisabled",{get:function(){return this._reportGoogleDisabled},set:function(e){this.storage.setItem("reportGoogleDisabled",e.toString()),this._reportGoogleDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLanguage",{get:function(){return this._contentLanguage},set:function(e){this.storage.setItem("contentLanguage",e),this._contentLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoplayOff",{get:function(){return this._autoplayOff},set:function(e){this.storage.setItem("autoplayOff",e.toString()),this._autoplayOff=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"announcement1",{get:function(){return this._announcement1},set:function(e){this.storage.setItem("announcement1",e.toString()),this._announcement1=e},enumerable:!0,configurable:!0}),e}();e.value("UserSettingsStatic",t),e.value("animationEase","cubic-in-out").value("animationDuration",850),e.value("debug_data",!1).value("debug_mode",!1);var n;!function(e){e[e.str=0]="str",e[e.date=1]="date",e[e.rating=2]="rating",e[e.count=3]="count"}(n||(n={})),e.value("propertyType",n),angular.module("tnConfig").factory("placeholderImage",["$rootScope","trustAsResourceUrlFilter",function(e,t){return e.placeholderImage=t("img/default-placeholder.png"),e.placeholderImage}]),angular.module("tnConfig").value("placeholderUserImage","https://thebenclark.files.wordpress.com/2014/03/facebook-default-no-profile-pic.jpg").value("analyticsDialog",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/analytics-dialog.html",controller:"AnalyticsDialog",controllerAs:"analyticsDialog",onComplete:function(e){e.analyticsDialog.onload()}}),e.factory("nodesConfig",["propertyType",function(e){var t={},n=t.index={};return t.store="nodes",t.type={title:e.str,image:e.str,type:e.str,locked_image:e.str,visited:e.date,favicon:e.str,views:e.count,description:e.str,address:e.str},n[r[r.title]]={key:o[r.title],options:{unique:!1,multiEntry:!1}},n[r[r.visited]]={key:o[r.visited],options:{unique:!1,multiEntry:!1}},t.listCtrl={sortBy:r[r.visited],sortOrder:!1,searchText:"",selectedText:null,disableSort:!1,getSelectedText:function(){return this.selectedText},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},getText:function(){var e=this.getSelectedText();return e?e.text:this.getSearchText()},isSearch:function(){return!(!this.getSelectedText()&&!this.getSearchText())},type:{visited:t.type.visited,title:t.type.title},clearSearch:function(){this.searchText="",this.selectedText=null}},t}]);var r;!function(e){e[e.title=0]="title",e[e.image=1]="image",e[e.type=2]="type",e[e.locked_image=3]="locked_image",e[e.visited=4]="visited",e[e.favicon=5]="favicon",e[e.description=6]="description",e[e.tags=7]="tags",e[e.rss=8]="rss",e[e.geo=9]="geo",e[e.address=10]="address",e[e.isArticle=11]="isArticle",e[e.url=12]="url",e[e.facebook_id=13]="facebook_id",e[e.color=14]="color",e[e.og_image=15]="og_image",e[e.lang=16]="lang"}(r||(r={}));var o;!function(e){e[e.n=0]="n",e[e.i=1]="i",e[e.t=2]="t",e[e.l=3]="l",e[e.v=4]="v",e[e.f=5]="f",e[e.d=6]="d",e[e.k=7]="k",e[e.r=8]="r",e[e.g=9]="g",e[e.a=10]="a",e[e.c=11]="c",e[e.u=12]="u",e[e.b=13]="b",e[e.o=14]="o",e[e.m=15]="m",e[e.e=16]="e"}(o||(o={})),angular.module("tnConfig").value("nodeDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-dialog.html",controller:"NodeDialogCtrl",controllerAs:"vm",onComplete:function(e,t){t.find("#dialogContent_node-dialog").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("#dialogContent_node-dialog").mCustomScrollbar("destroy")}}).value("relatedDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,controller:function(){this.loading=!0},controllerAs:"relatedDialogCtrl",bindToController:!0,templateUrl:"partials/shared/related-dialog.html",onComplete:function(e,t){t.find("md-content").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("md-content").mCustomScrollbar("destroy")}}).value("nodeUrlDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-url-dialog.html",controllerAs:"vm"}).value("nodesProperties",r).value("nodesShortProperties",o),e.value("SCOPES",["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.email"]).value("API_KEY","AIzaSyCHbESTG-Tt_cir4j6swhSe73MmNxOMdAI").value("SECONDARY_API_KEY","AIzaSyAVFXhdstGRYa40dbjNhJmzKx4ASVrBpuA").value("DISQUS_FORUM","brancher").value("DISQUS_API_KEY","VGVs0rDj4Weg7I5d42NNgIukCqMhFv3PQQkh4WACRZJvvXEWzBXV0zUyTOfb7uMt").value("FB_ID","1099461436740953").value("FB_SCOPES",["user_friends"]).value("EBAY_CAMPID","5338007501").value("AMAZON_ID","brancher0b-20").value("ALIBABA_ID","928268164").value("ITUNES_TOKEN","").value("GOOGLE_OPTIMIZE_CODE","GTM-M56ZPVZ").factory("BUFFER_ID",["debug_mode",function(e){return e?"59c86e67aa7cc01b6bf6a1bc":"59c859ee285dcfbc478fcdee"}]).factory("BUFFER_REDIRECT_URI",["BASE_URL",function(e){return e+"/buffer"}]).constant("ANALYTICS_TRACKING_ID","UA-87007310-1").constant("GOOGLE_AD_CLIENT","ca-pub-4049546790962842").value("EXTENSION_ID","undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id||"dfanhpdcmhemhkjafmannijhneiplgec").value("CLIENT_ID","988709185566-o0jm430od2s08urqnsujfnli5a6572is.apps.googleusercontent.com").factory("BASE_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://brancher.io"}]).factory("BASE_API_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://getbrancher.appspot.com"}]).factory("BASE",["BASE_API_URL",function(e){return e+"/_ah/api"}]).factory("EXTENSION_URL",["EXTENSION_ID",function(e){return"https://chrome.google.com/webstore/detail/"+e}]).factory("STORAGE_URL",["BASE_API_URL",function(e){return e+".storage.googleapis.com/"}]),e.factory("treesConfig",["$rootScope","UserSettingsStatic","propertyType",function(e,t,n){var r={},o=e.userSettings=new t(r,i),l=r.index={},s=localStorage;return r.store="trees",r.MAX_CHILDREN=100,r.checkOverQuota=function(){var e=s.getItem("overQuotaNotification");return!e||+new Date-+new Date(e)>864e5},r.setOverQuota=function(){s.setItem("overQuotaNotification",(new Date).toISOString())},l[i[i.children]]={key:a[i.children],options:{unique:!1,multiEntry:!0}},l[i[i.created]]={key:a[i.created],options:{unique:!0,multiEntry:!1}},l[i[i.modified]]={key:a[i.modified],options:{unique:!0,multiEntry:!1}},l[i[i.title]]={key:a[i.title],options:{unique:!1,multiEntry:!1}},e.groupCtrl=r.groupCtrl={sortBy:o.treesSort,sortOrder:!1,disableSort:!1,treesSearch:{selectedNode:null,searchText:"",getSelectedNode:function(){return this.selectedNode},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},isSearch:function(){return!(!this.getSelectedNode()&&!this.getSearchText())},clear:function(){this.selectedNode=null,this.searchText=""},getText:function(){var e=this.getSelectedNode();return e?e.text:this.getSearchText()}},type:{created:n.date,modified:n.date,title:n.str,rating:n.rating,description:n.str,count:n.str,addedCount:n.count,views:n.count},updateSort:function(){var e=this,t=e.sortBy,r=e.sortOrder;switch(this.type[t]){case n.date:this.reverse=!r;break;case n.str:this.reverse=r;break;case n.rating:this.reverse=!0}}},r.treeCtrl={sortBy:o.treeSort,sortOrder:!1,vertical:o.treeLayout,isListed:!1,isExpanded:!1,type:{visited:n.date,timestamp:n.date,title:n.str},data:{visited:!0,timestamp:!1,title:!0}},e.groupCtrl.updateSort(),r}]);var i;!function(e){e[e.created=0]="created",e[e.modified=1]="modified",e[e.title=2]="title",e[e.description=3]="description",e[e.children=4]="children",e[e.parents=5]="parents",e[e.timestamps=6]="timestamps",e[e.original=7]="original",e[e.image=8]="image",e[e.favorite=9]="favorite",e[e.tags=10]="tags",e[e.seen=11]="seen",e[e.domains=12]="domains",e[e.lang=13]="lang"}(i||(i={}));var a;!function(e){e[e.t=0]="t",e[e.m=1]="m",e[e.n=2]="n",e[e.d=3]="d",e[e.c=4]="c",e[e.p=5]="p",e[e.s=6]="s",e[e.o=7]="o",e[e.i=8]="i",e[e.f=9]="f",e[e.g=10]="g",e[e.e=11]="e",e[e.a=12]="a",e[e.l=13]="l"}(a||(a={}));var l;!function(e){e[e.tree=0]="tree",e[e.link=1]="link",e[e.image=2]="image"}(l||(l={})),angular.module("tnConfig").value("treeProperty",i).value("treeShortProperty",a).value("linkEvent",l).value("dialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-dialog.html",controller:"TreeDialogCtrl",controllerAs:"vm"}).value("userImagesDialogConfig",{controller:"UserImagesDialogCtrl",controllerAs:"userImagesDialog",templateUrl:"partials/shared/user-images-dialog.html",hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,onComplete:function(e,t){t.find("#dialog-container").mCustomScrollbar(e.scrollConfig)},onRemoving:function(e){e.find("#dialog-container").mCustomScrollbar("destroy")}}).value("mapDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/map-dialog.html",controllerAs:"mapDialogCtrl",controller:["$scope","$timeout","$controller","maps","geolocation","geoNodes","title",function(e,t,n,r,o,i,a){e.mapDialogCtrl.title=a,t(function(){return n("MapDialogCtrl",{$scope:e,maps:r,geolocation:o,geoNodes:i})},850)}]}).value("reportDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/report-dialog.html",controller:"ReportDialogCtrl",controllerAs:"vm"}).value("subscriptionsDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/components/subscriptions-dialog.html",controller:"SubscriptionsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("treeEditorsDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-editors-dialog.html",controller:"TreeEditorsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("overQuotaNotification",{type:"basic",iconUrl:"img/icon128-disabled.png",title:"Storage quota exceeded!",message:"You have reached the maximum number of trees for a free user",contextMessage:"Please, upgrade to pro-account for the unlimited storage",requireInteraction:!0}).factory("deleteTreeConfirmDialog",["$mdDialog",function(e){return function(t){return e.confirm().title("Are you sure?").textContent("This tree will be deleted.").ariaLabel("Delete tree").targetEvent(t).ok("OK").cancel("Cancel")}}])}(angular.module("tnConfig",[])),function(e){e.directive("tnActiveChip",function(){return{restrict:"A",link:function(e,t,n){"true"==n.tnActiveChip&&t.parent().parent().addClass("tn-active")}}}),e.directive("tnClipboard",["toastObserver",function(e){return{restrict:"A",link:function(t,r){var o=n(5),i=new o(r[0]);i.on("success",function(){return e.notifyObservers("URL copied")}),t.$on("$destroy",function(){return i.destroy()})}}}]),e.directive("tnDomain",["BASE_URL",function(e){return{restrict:"A",templateUrl:"partials/shared/domain.html"}}]),e.directive("tnImageError",["placeholderImage",function(e){return{restrict:"A",link:function(t,n){var r=n[0];r.onerror=function(){n.addClass("image-error"),r.src=e}}}}]),e.directive("tnInviteFriends",["users",function(e){return{scope:!0,controller:function(){var t=this;t.users=e,t.inviteUrl="https://goo.gl/Wj6Z8f"},controllerAs:"inviteFriendsCtrl",templateUrl:"partials/shared/invite-friends.html",restrict:"E"}}]),e.directive("tnLike",["facebookSDK","URI","FB_ID","BASE_URL",function(e,t,n,r){return{scope:{url:"@",likeLayout:"@",action:"@",size:"@",width:"@",height:"@",share:"@"},restrict:"E",link:function(o,i){var a=o.url,l={href:a,action:o.action||"like",layout:o.likeLayout||"box_count",share:o.share||!1,size:o.size||"small",width:o.width||"89",height:o.height||"48",show_faces:!1,appId:n};e.then(function(){if("undefined"==typeof FB){var e=t(r+"/fblike_iframe").query(l).toString(),n=angular.element("<iframe/>").attr("src",e).attr("width",l.width).attr("height",l.height).attr("style","border:none;overflow:hidden").attr("scrolling","no").attr("frameborder","0").attr("allowTransparency","true");i.append(n)}else{var o=angular.element("<div/>").addClass("fb-like").attr("data-href",l.href).attr("data-show-faces",l.show_faces).attr("data-size",l.size).attr("data-share",l.share).attr("data-action",l.action).attr("data-layout",l.layout);i.append(o),FB.XFBML.parse(i[0])}})}}}]),e.directive("tnShareMenu",function(){return{scope:{category:"@",url:"@",shareUrl:"&",close:"&",publish:"&",preview:"&",container:"&",containerPreview:"&"},controller:"ShareMenuCtrl",controllerAs:"shareMenuCtrl",bindToController:!0,templateUrl:"partials/shared/share-menu.html",restrict:"E"}}),e.directive("tnSvg",["$mdIcon","$parse",function(e,t){return{restrict:"A",link:function(n,r,o){e(o.tnSvg).then(function(e){var n=t(o.tnSvgAttrs)(null)||{};angular.forEach(n,function(t,n){e.setAttribute(n,t)}),r.append(e)})}}}]),e.directive("tnTag",["BASE_URL",function(e){return{restrict:"A",link:function(t){t.linkHref=e+"/tag/"+t.$chip},templateUrl:"partials/shared/tag.html"}}])}(angular.module("tnSharedDirectives",["tnFilters","tnConfig"])),function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnImage",["nodes","placeholderImage",function(e,t){return{restrict:"A",link:function(n,r){function o(){function o(){i.hasNoImage=!0,c.src=t.toString()}var l=e.getNode(a),s=l.locked_image||l.image,c=r[0];if(!s)return void o();c.src=s,c.onerror=function(){return n.$applyAsync(o)},c.alt=l.title}var i=n.nodeCtrl,a=i.node.data.key,l=i.dataObserver;l.subscribe(o),o(),n.$on("$destroy",function(){return l.unsubscribe(o)})}}}]),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnListItem",["$animate","nodeListedMoveTransition","nodeListedLeaveTransition",function(e,t,n){return{priority:1,restrict:"A",link:function(r,o){var i=d3.select(o[0]).select(".node-listed");r.$watch("$index",function(e,n){i.call(t,r.node,e,n)}),e.on("leave",o,function(e,t){"start"==t&&i.call(n,r.$index)})}}}]),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnNodeDrag",["$q","$interval","trees","Trees","Link","nodeSize","layoutObservers","util",function(e,t,n,o,i,a,l,s){var c={scrollInertia:100,timeout:0,scrollEasing:"linear"};return{priority:1,require:"tnNode",restrict:"A",link:function(u,d){function f(){var e=d3.event,t=e.sourceEvent;if(t.stopPropagation(),t.preventDefault(),3==t.which||2==t.button)return void(p=null);C.node=u.node,p=r.element(v.node()).clone().addClass("node--dragged").removeClass("node--is-open").css("visibility","hidden").css("pointer-events","none").prependTo(document.body)}function m(){if(h&&(t.cancel(h),h=null),p){var e=d3.event,n=e.sourceEvent,r=n.pageX,o=n.pageY,i=C.size,a=C.position;p.css("visibility","visible").css("transform",s.translate(r-.5*i.width,o-.5*i.height));var l=p[0].getBoundingClientRect();a.x=l.left,a.y=l.top,l.top<100?h=t(function(){return u.updateTabScroll("scrollTo","+=50",c)},100):l.bottom>_[0].offsetHeight&&(h=t(function(){return u.updateTabScroll("scrollTo","-=50",c)},100)),b.notifyObservers(C)}}function g(){h&&(t.cancel(h),h=null),p&&(p.remove(),p=null,C.isDragEnd=!0,b.notifyObservers(C),C.isDragEnd=!1,C.node=null)}var p,h,v=d3.select(d[0]).select(".node"),y=u.node.data.key,b=l.nodeDragObserver,_=r.element("#trees-containers"),C={key:y,node:null,isDragEnd:!1,position:{x:0,y:0},size:{width:a.width,height:a.height},callback:function(t){if(n.treesContainer.getTree(t.tree).hasKey(y))return e.reject();var r=o.newLink(t.key,y,new Date),a=e.when(r);return r.put(t.key,new i),a}};v.classed("node--draggable",!0).call(d3.behavior.drag().on("dragstart",f).on("drag",m).on("dragend",g)),v.selectAll(".node__tools, .node__site-container").call(d3.behavior.drag().on("dragstart",function(){var e=d3.event;e.sourceEvent.stopPropagation(),e.sourceEvent.preventDefault()})),u.$on("$destroy",function(){v.on(".drag",null).on(".click",null),v.selectAll(".node__tools, .node__site-container").on(".drag",null)})}}}]),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=e;o.directive("tnListNodeMenu",function(){return{scope:!0,restrict:"A",require:["?^tnNode","?^tnNodeListed"],link:function(e,t,n,r,o){var i=e.nodeMenuCtrl;i.nodeCtrl=r[0]||r[1],i.template="partials/components/list-node-menu.html",i.includeShare=!!n.includeShare,o(e,function(e){return t.append(e)})},template:"",controller:"NodeMenuCtrl",controllerAs:"nodeMenuCtrl",transclude:!0}}),o.directive("tnNodeMainAction",function(){return{scope:!0,restrict:"A",link:function(e,t,n,r){e.nodeMenuCtrl.nodeCtrl=r},require:"^tnNode",controller:r.noop,templateUrl:"partials/shared/node-main-action.html",controllerAs:"nodeMenuCtrl"}}),o.directive("tnShareNodeMenu",function(){return{scope:!0,restrict:"A",require:"^tnNode",link:function(e,t,n,r,o){var i=e.nodeMenuCtrl;i.nodeCtrl=r,i.template="partials/shared/node-share-menu.html",o(e,function(e){return t.append(e)})},template:"",controller:"MenuCtrl",controllerAs:"nodeMenuCtrl",transclude:!0}}),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnNodeTooltip",["nodes","timestampObserver","uppercaseFilter","relativeTimestampFilter","absoluteTimestampFilter",function(e,t,n,r,o){return{restrict:"A",link:function(i,a){function l(){var t=e.getNode(c),i=t.title,l=t.description,s=t.visited,d=t.type,f=t.tags,m=t.address,g=t.url,p=n(i)+"\n\n";g&&(p+=g+"\n\n"),d&&(p+="Type: "+d+"\n\n"),l&&(p+="Description: "+l+"\n\n"),f&&f.length&&(p+="Tags: "+f.join(", ")+"\n\n"),m&&(p+="Address: "+m+"\n\n"),s&&(p+="Visited: "+r(s)+" ("+o(s)+")\n"),u&&(p+="Added: "+r(u)+" ("+o(u)+")\n"),a.attr("title",p)}var s=i.nodeCtrl,c=s.node.data.key,u=s.node.data.value.timestamp,d=s.dataObserver;t.subscribe(l),d.subscribe(l),i.$on("$destroy",function(){d.unsubscribe(l),t.unsubscribe(l)}),l()}}}]),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnNodeType",["nodes",function(e){return{restrict:"A",link:function(t,n){var r=e.getNode(t.nodeCtrl.node.data.key).type;r&&n.attr("data-node-type"," ("+r+")")}}}]);var o=e;o.directive("tnNode",function(){return{priority:2,restrict:"E",scope:{node:"=",openUrl:"&",container:"&",containerPreview:"&",scroll:"&"},templateUrl:"partials/shared/node.html",controller:"NodeCtrl",controllerAs:"nodeCtrl",bindToController:!0,transclude:{menu:"?nodeMenu",tools:"?nodeTools",main:"?nodeMain",share:"?nodeShare"}}}),o.directive("tnNodeListed",["$rootScope",function(e){return{priority:2,restrict:"E",scope:{node:"=",openUrl:"&",showVisited:"=",container:"&",containerPreview:"&",scroll:"&"},templateUrl:function(){return e.isMobile?"partials/mobile/node-listed.html":"partials/shared/node-listed.html"},controller:"NodeCtrl",controllerAs:"nodeCtrl",bindToController:!0,transclude:!0}}]),o.directive("tnNodePath",function(){return{priority:2,restrict:"E",scope:{node:"=",last:"=",openUrl:"&"},templateUrl:"partials/shared/node-path.html",controller:"NodeCtrl",controllerAs:"nodeCtrl",bindToController:!0}}),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnTextContainer",["$compile","$interpolate",function(e,t){var n=t("<ng-transclude></ng-transclude><span tn-text='{{property}}'></span>");return{terminal:!0,restrict:"A",link:function(t,r,o,i,a){e(n({property:o.tnTextContainer}))(t,function(e){return r.append(e)},{parentBoundTranscludeFn:a,futureParentElement:r})},transclude:!0}}]),Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);e.directive("tnText",["relativeTimestampFilter","absoluteTimestampFilter","numberAbbreviateFilter","nodes","timestampObserver","nodesConfig","propertyType",function(e,t,n,r,o,i,a){var l=i.type;return{restrict:"A",link:function(t,i,s){function c(){var t,o=r.getNode(u)[d]||"";if(o)switch(f){case a.date:t=e(o);break;case a.count:var l=parseInt(o);l&&(t=n(l));break;default:t=o}t?(i.text(t),i.parent().removeClass("ng-hide")):i.parent().addClass("ng-hide")}var u=t.nodeCtrl.node.data.key,d=s.tnText,f=l[d],m=t.nodeCtrl.dataObserver;m.subscribe(c),f==a.date&&o.subscribe(c),t.$on("$destroy",function(){m.unsubscribe(c),f==a.date&&o.unsubscribe(c)}),c()}}}])}(angular.module("tnNodeDirectives",["tnSharedDirectives"])),function(e){e.value("nodeSize",{width:180,height:200,margin:{left:40,top:80},listed:72}),e.factory("layoutObservers",["ObservableClass",function(e){var t=e(),n=e(),r=e();return{widthObserver:t,scrollObserver:n,nodeDragObserver:e(),scrollEndObserver:r}}]),e.value("treeMargin",50).value("treeMetaHeight",50).value("treesContainerSidesPadding",60).value("treesToolbarHeight",44).value("treeBodyHorizontalPadding",50).value("treeBodyVerticalPadding",16).value("treeLegendHeight",76)}(angular.module("tnLayout",["tnConfig"])),function(e){e.config(["$animateProvider",function(e){e.classNameFilter(/is-animated/)}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.factory("linkTransition",["Tab","treeLayout","animationUtil","animationDuration","animationEase",function(e,t,n,r,o){return function(i,a){var l=t.diagonal(a);if(e.active){var s=t.diagonalPrev(a),c=n.transformDiagonal(d3.interpolate(s,l));i.style("opacity",a.target.enter?0:null).transition().ease(o).duration(r).style("opacity",1).tween("d",function(){return c})}else i.attr("d",l)}}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.animation(".link",["Tab","treeLayout","animationUtil","animationDuration","animationEase",function(e,t,n,r,o){var i={};return i.leave=function(n,i){var a=d3.select(n[0]),l=a.datum().link,s=t.diagonalPrev(l),c=a.selectAll("path");!e.active||l.source.exit&&!l.target.exit||!l.source.pageExit&&l.target.pageExit?i():c.transition().ease(o).duration(r).attr("d",s).style("opacity",0).each("end",i)},i}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.factory("nodeListedLeaveTransition",["Tab","nodeSize","util","animationUtil","animationDuration",function(e,t,n,r,o){var i=t.listed;return function(e,t){var a=n.translate(0,t*i),l=n.translate(0,(t-2)*i),s=r.transformTween(d3.interpolateString(a,l));e.style("will-change","transform").style("z-index",1).transition().duration(o).tween("transform",function(){return s})}}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.factory("nodeListedMoveTransition",["Tab","nodeSize","util","animationUtil","animationDuration",function(e,t,n,r,o){var i=t.listed;return function(t,a,l,s){var c=n.translate(0,l*i);if(e.active&&l!=s){var u=n.translate(0,s*i),d=r.transformTween(d3.interpolateString(u,c));t.style("will-change","transform").transition().duration(o).tween("transform",function(){return d}).each("end",function(){t.style("will-change",null).style("z-index",null)})}else t.style("transform",c)}}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.factory("nodeMoveTransition",["Tab","util","animationUtil","animationDuration","animationEase",function(e,t,n,r,o){return function(i,a){var l=t.translate(a.x0,a.y0),s=t.translate(a.x,a.y);if(e.active&&l!=s){var c=n.transformTween(d3.interpolateString(l,s));if(i.style("will-change","transform").style("z-index",a.enter?2:null).transition().ease(o).duration(r).tween("transform",function(){return c}).each("end",function(){i.style("will-change",null).style("z-index",null)}),a.enter){var u=i.select(".node__container").style("will-change","opacity").style("opacity",0);u.transition().ease(o).duration(r).style("opacity",1).each("end",function(){u.style("will-change",null).style("opacity",null)})}}else i.style("transform",s)}}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.animation(".tree-node",["Tab","util","animationUtil","animationDuration","animationEase",function(e,t,n,r,o){var i={};return i.leave=function(i,a){var l=d3.select(i[0]).select(".node"),s=l.datum().node,c=t.translate(s.x,s.y);if(s.exit=!1,e.active){var u=t.translate(s.x0,s.y0),d=n.transformTween(d3.interpolateString(c,u));l.style("will-change","transform").style("z-index",1).transition().ease(o).duration(r).tween("transform",function(){return d}).style("box-shadow","none").each("end",a),l.select(".node__container").style("will-change","opacity").transition().ease(o).duration(r).style("opacity",0)}else a()},i}]),Object.defineProperty(t,"__esModule",{value:!0});n(0);e.factory("animationUtil",function(){var e={},t=d3.interpolateNumber(0,1),n=d3.interpolateNumber(1,0);return e.opacityInterpolatorEnter=function(){return t},e.opacityInterpolatorExit=function(){return n},e.distance=function(e){return Math.sqrt(Math.pow(e.x-e.x0,2)+Math.pow(e.y-e.y0,2))},e.transformTween=function(e){return function(t){this.style.setProperty("transform",e(t))}},e.transformDiagonal=function(e){return function(t){this.setAttribute("d",e(t))}},e})}(angular.module("tnAnimation",["tnLayout","tnConfig","ngAnimate"])),function(e){e.service("chromeRuntime",["$rootScope","$q","EXTENSION_ID",function(e,t,n){var r=this,o=chrome.runtime;o.onMessage.addListener(function(t,n,r){return e.$emit(t.type,t,n,r),!0}),r.sendMessage=function(e){var r=t.defer();return o.sendMessage(n,e,function(e){var t=o.lastError||e&&e.error;t?r.reject(t):r.resolve(e)}),r.promise}}])}(angular.module("tnChromeShared",["tnConfig"])),function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o={subscribe:r.noop,unsubscribe:r.noop};e.controller("NodeCtrl",["nodes","BASE_URL",function(e,t){var n=this;n.dataObserver=o,n.$onInit=function(){var r=n.node.data.key,o=e.getNode(r);o.url&&(n.node.domain=o.url.split("/")[2]),n.nodeURL=t+"/article/?key="+r,n.node.favicon=o.favicon}}]).config(["$provide",function(e){e.factory("timestampObserver",function(){return o}),e.factory("nodes",["$q",function(e){var t={},n=e.defer(),o={nodesPromise:n.promise,getNode:function(e){return t[e]}};return chrome.runtime.sendMessage({type:"popup:nodes"},function(e){r.isArray(e.nodes)&&e.nodes.length&&(e.nodes.forEach(function(e){return t[e.value]=e}),o.parent=e.url,n.resolve(e.nodes))}),o}])}]).run(["$window","$rootScope","nodes","BASE_URL",function(e,t,n,r){t.clickNode=function(t){var o=n.getNode(t);e.open(r+"/article/?key="+t),chrome.runtime.sendMessage({child:o.url,canonical:o.url,parent:n.parent,type:"link:referrer",value:o})},n.nodesPromise.then(function(e){t.nodes=e.map(function(e){return{data:{key:e.value,value:{}}}})})}])}(angular.module("related",["tnNodeDirectives","tnAnimation","tnChromeShared"])),angular.module("related").run(["$templateCache",function(e){"use strict";e.put("partials/components/list-node-menu.html",'<md-menu-content><tn-share-menu ng-if=::nodeMenuCtrl.includeShare close=nodeMenuCtrl.close() url="{{ ::nodeMenuCtrl.nodeCtrl.nodeShortURL }}" preview=nodeMenuCtrl.nodeCtrl.getPreview() container=nodeMenuCtrl.nodeCtrl.container() container-preview=nodeMenuCtrl.nodeCtrl.containerPreview() category=node></tn-share-menu><md-menu-item><md-button title=Info ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.showNodeDialog($event)" ga-track-event="[\'node\', \'info\']"><md-icon md-svg-icon=info></md-icon>Info</md-button></md-menu-item><md-menu-item><md-button title="Add to favorites" ng-class="{\'md-accent\': nodeMenuCtrl.nodeCtrl.favorite}" ng-disabled=nodeMenuCtrl.nodeCtrl.favoriteDisabled ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.toggleFavorite()" ga-track-event="[\'node\', \'favorite\']"><md-icon md-svg-icon=favorite></md-icon>Favorite</md-button></md-menu-item><md-menu-item ng-show=!nodeMenuCtrl.nodeCtrl.isWebSearch><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.related($event)" ga-track-event="[\'node\', \'related\']" aria-label=Related><md-icon>new_releases</md-icon>Related</md-button></md-menu-item><md-menu-item ng-show=nodeMenuCtrl.nodeCtrl.isArticle><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.openArticle($event)" ga-track-event="[\'node\', \'reader\']"><md-icon md-svg-icon=reader></md-icon>Reader</md-button></md-menu-item><md-menu-item ng-if=!$root.isMobile><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.showAnalyticsDialog($event)" ga-track-event="[\'node\', \'analytics\']"><md-icon md-svg-icon=analytics></md-icon>Analytics</md-button></md-menu-item><md-menu-item ng-show=nodeMenuCtrl.nodeCtrl.isWebSearch><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.googleSearch($event)" ga-track-event="[\'node\', \'search\']" aria-label=Other><md-icon md-svg-icon=search></md-icon>Search</md-button></md-menu-item><md-menu-item ng-show=nodeMenuCtrl.nodeCtrl.hasPhotos><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.showPhotosDialog($event)" ga-track-event="[\'node\', \'photos\']" aria-label=Images><md-icon md-svg-icon=images></md-icon>Images</md-button></md-menu-item><md-menu-item ng-show=nodeMenuCtrl.nodeCtrl.hasRSS><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.rss($event)" ga-track-event="[\'node\', \'rss\']" aria-label=RSS><md-icon md-svg-icon=rss></md-icon>RSS</md-button></md-menu-item><md-menu-item ng-show=nodeMenuCtrl.nodeCtrl.hasGeolocation><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.showMapDialog($event)" ga-track-event="[\'node\', \'map\']"><md-icon md-svg-icon=map></md-icon>Map</md-button></md-menu-item><md-menu-item><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.copyNode(node.data.key)" ga-track-event="[\'node\', \'copy\']" aria-label=Copy><md-icon md-svg-icon=copy></md-icon>Copy</md-button></md-menu-item><md-menu-item ng-if="::vm.hasRemove && !node.data.value.related"><md-button ng-click="nodeMenuCtrl.close(); vm.removeNode(node.data.key)" ga-track-event="[\'node\', \'remove\']" aria-label=Remove><md-icon md-svg-icon=remove></md-icon>Remove</md-button></md-menu-item><md-menu-item><md-button ng-click="nodeMenuCtrl.close(); nodeMenuCtrl.nodeCtrl.showReportDialog($event)" ga-track-event="[\'node\', \'report\']" aria-label=Report ng-disabled=nodeMenuCtrl.nodeCtrl.reportDisabled><md-icon md-svg-icon=report></md-icon>Report</md-button></md-menu-item></md-menu-content>'),e.put("partials/shared/node.html",'<div class="node md-whiteframe-1dp" ng-class="{\'node--is-open\': nodeCtrl.isOpened, \'node--no-image\': nodeCtrl.hasNoImage, \'md-whiteframe-10dp\': nodeCtrl.node.isNotEmpty}" tn-node-tooltip><a class=node__url ng-href="{{ ::nodeCtrl.nodeURL }}" ng-click="$event.preventDefault(); $event.stopPropagation(); nodeCtrl.openUrl({ \'key\': nodeCtrl.node.data.key})"></a><div class=node__container><div class=node__menu-container><div class=node__tools ng-transclude=menu></div></div><div class=node__share-menu-container><div class=node__tools ng-transclude=share></div></div><div class=node__tools ng-transclude=tools></div><div class=node__image-container><img class=node__image tn-image><div class=node__image-filter></div><div class=node__youtube-button_container ng-show=::nodeCtrl.isYoutubeVideo><img src=img/YouTube-icon-dark.png class="node__youtube-button node__youtube-button--no-hover"> <img src=img/YouTube-icon-full_color.png class="node__youtube-button node__youtube-button--hover node__tools" ng-click="$event.preventDefault(); $event.stopPropagation(); nodeCtrl.openYoutubeVideo($event)" ga-track-event="[\'node\', \'youtube\', \'nodeCard\']"></div><div class=node__count title="Unique views"><span tn-text=views></span></div><div class=node__tools ng-transclude=main></div></div><div class=node__text-container md-colors=nodeCtrl.colors><div class=node__title-container><div class=node__title-container-inner><div class=node__title-text tn-text=title tn-node-type></div></div></div><div class=node__description-container><div class=node__description><span><span tn-text=description></span></span> <span><span tn-text=address></span></span></div></div><a class=node__site-container ng-href="{{::nodeCtrl.domainUrl }}" ng-click="$event.preventDefault(); $event.stopPropagation(); $root.toggleDomain(nodeCtrl.node.domain)" ga-track-event="[\'node\', \'domain\', \'nodeCard\']" layout=row layout-align="space-between center"><div class=node__site-name-container><div class=node__favicon-container><img class=node__favicon ng-src="{{ ::nodeCtrl.node.favicon }}" ng-if=::nodeCtrl.node.favicon tn-image-error></div><div class="node__site-name md-caption">{{ ::nodeCtrl.node.domain | www }}</div></div></a></div></div></div>')}])},function(e,t,n){e.exports=n(1)(25)},function(e,t,n){e.exports=n(1)(11)},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){var e;return function e(t,n,o){function i(l,s){if(!n[l]){if(!t[l]){var c="function"==typeof r&&r;if(!s&&c)return r(l,!0);if(a)return a(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[l]={exports:{}};t[l][0].call(d.exports,function(e){return i(t[l][1][e]||e)},d,d.exports,e,t,n,o)}return n[l].exports}for(var a="function"==typeof r&&r,l=0;l<o.length;l++)i(o[l]);return i}({1:[function(e,t,n){function r(e,t){for(;e&&e.nodeType!==o;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=r},{}],2:[function(e,t,n){function r(e,t,n,r,i){var a=o.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function(){e.removeEventListener(n,a,i)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}var i=e("./closest");t.exports=r},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!l.string(t))throw new TypeError("Second argument must be a String");if(!l.fn(n))throw new TypeError("Third argument must be a Function");if(l.node(e))return o(e,t,n);if(l.nodeList(e))return i(e,t,n);if(l.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return s(document.body,e,t,n)}var l=e("./is"),s=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}t.exports=r},{}],6:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},t.exports=r},{}],7:[function(t,n,r){!function(o,i){if("function"==typeof e&&e.amd)e(["module","select"],i);else if(void 0!==r)i(n,t("select"));else{var a={exports:{}};i(a,o.select),o.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})},{select:5}],8:[function(t,n,r){!function(o,i){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],i);else if(void 0!==r)i(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};i(a,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=a.exports}}(this,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=o(t),u=o(n),d=o(r),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return l(t,e),m(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return s("action",e)}},{key:"defaultTarget",value:function(e){var t=s("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return s("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(u.default);e.exports=g})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)})}]);