!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t){e.exports=background},function(e,t,n){e.exports=n(0)(15)},function(e,t,n){e.exports=n(0)(6)},function(e,t,n){e.exports=n(0)(19)},function(e,t,n){e.exports=n(0)(13)},function(e,t,n){e.exports=n(0)(14)},function(e,t,n){n(1),n(2),n(7),n(3),n(4),n(5),function(e){e.factory("$queueFactory",["$q","$window","$timeout","$rootScope",function(e,t,n,r){var o=function(e){this.init(e)},i=o.prototype;return i._limit=null,i._queue=null,i._deferFunc=null,i.init=function(e){this._limit=e.limit,this._queue=[],e.deferred&&(t.setImmediate?this._deferFunc=function(e){t.setImmediate(function(){e(),r.$apply()})}:this._deferFunc=function(e){n(e)})},i.enqueue=function(e,t,n){var r=[e,t,n];return this._queue.push([e,t,n]),this.dequeue(),r},i.remove=function(e){var t=this._queue.indexOf(e);return this._queue.splice(t,1)[0]},i.dequeue=function(){if(!(this._limit<=0||0===this._queue.length)){this._limit--;var t,n,r=this._queue.shift(),o=r[0],i=r[1],a=r[2],u=this;t=n=function(){u._limit++,u._deferFunc?u._deferFunc(function(){u.dequeue()}):u.dequeue()},e.when(o.apply(i||null,a||null)).then(t,n)}},i.clear=function(){this._queue.length=0},function(e,t){var n;return angular.isObject(e)?n=e:(e=e||1,angular.isUndefined(t)&&(t=!1),n={limit:e,deferred:!!t}),new o(n)}}])}(angular.module("ngQueue",[])),function(e){"use strict";e.factory("GApi",["$q","GClient","GData","$window",function(e,t,n,r){function o(e,t,n,r,o){var i={};i.api=e,i.apiLoad=!1,i.method=t,i.params=n,i.auth=r,i.deferred=o,h.push(i)}function i(n,o,i){var u=e.defer();return t.get().then(function(){r.gapi.client.load(n,o,void 0,i).then(function(e){var t={api:n,version:o,url:i};e&&e.hasOwnProperty("error")?(console.log(o),u.reject(t)):(u.resolve(t),f.push(n),a(n))})}),u.promise}function a(e){for(var t=e,r=0;r<h.length;r++){var o=h[r];o.api!=t&&!o.apiLoad||0!=o.auth&&1!=n.isLogin()?o.api==t&&(h[r].apiLoad=!0):(c(o.api,o.method,o.params,o.deferred),r>-1&&h.splice(r--,1))}}function u(e,t,n){for(var o=t.split("."),e=r.gapi.client[e],i=0;i<o.length;i++)e=e[o[i]];return e(n)}function c(e,t,n,r){u(e,t,n).execute(function(e){e.error?r.reject(e):r.resolve(e)})}function s(t,n,r,i){var a=e.defer();return f.indexOf(t)>-1?c(t,n,r,a):o(t,n,r,i,a),a.promise}function l(t,n){function r(e,t){e.apply(this,n).then(function(e){o.resolve(e)}).catch(function(n){if(403==n.code&&n.message.toLowerCase().indexOf("limit exceeded")>-1||503==n.code){var i=Math.floor(1e3*Math.random()+1);t<5?setTimeout(function(){r(e,++t)},1e3*Math.pow(2,t)+i):o.reject(n)}else o.reject(n)})}var o=e.defer();return r(t,0),o.promise}var f=[],h=[];return{executeCallbacks:function(){a()},load:i,createRequest:u,execute:function(e,t,n){return 3==arguments.length?s(e,t,n,!1):2==arguments.length?s(e,t,null,!1):void 0},executeAuth:function(e,t,n){return 3==arguments.length?l(s,arguments):2==arguments.length?l(s,arguments):void 0}}}]),e.factory("GAuth",["$rootScope","$q","GClient","GApi","GData","$interval","$window","$location",function(e,t,n,r,o,i,a,u){function c(){var e=t.defer();return 0==d?n.get().then(function(){a.gapi.client.load("oauth2","v2",function(){d=!0,e.resolve()})}):e.resolve(),e.promise}function s(e,t){function n(e,t){var n={client_id:h,scope:p,immediate:!1,response_type:m};e&&(n.user_id=o.getUserId(),n.immediate=!0),void 0!=g&&(n.hd=g),a.gapi.auth.authorize(n,t)}e||!0!==d?c().then(function(){n(e,t)}):n(e,t)}function l(){function e(t){if("https://accounts.google.com"===t.origin){var o=JSON.parse(t.data);a.removeEventListener("message",e),o=n(o.a[0],"code"),void 0==o?r.reject():r.resolve(o)}}function n(e,t){t=t.replace(/[[]/,"[").replace(/[]]/,"]");var n=t+"=([^&#]*)",r=new RegExp(n),o=r.exec(e);return null==o?void 0:o[1]}var r=t.defer(),o=u.protocol()+"//"+u.hostname();(""!=u.port()||443!=u.port()&&"https"==u.protocol())&&(o=o+":"+u.port());a.open("https://accounts.google.com/o/oauth2/auth?scope="+encodeURI(p)+"&redirect_uri=postmessage&response_type=code&client_id="+h+"&access_type=offline&approval_prompt=force&origin="+o,null,"width=800, height=600");return a.addEventListener("message",e),r.promise}function f(){var e=t.defer();return a.gapi.client.oauth2.userinfo.get().execute(function(t){t.code?e.reject():(o.isLogin(!0),r.executeCallbacks(),t.name&&0!==t.name.length||(t.name=t.email),o.getUser(t),e.resolve(t))}),e.promise}var h,d=!1,g=void 0,p="https://www.googleapis.com/auth/userinfo.email",m="token id_token";return{setClient:function(e){h=e},setDomain:function(e){g=e},setScope:function(e){p=e},load:c,checkAuth:function(){var e=t.defer();return s(!0,function(){f().then(function(t){e.resolve(t)},function(){e.reject()})}),e.promise},login:function(){var e=t.defer();return s(!1,function(){f().then(function(t){e.resolve(t)},function(){e.reject()})}),e.promise},setToken:function(e){var n=t.defer();return c().then(function(){a.gapi.auth.setToken(e),f().then(function(){n.resolve()},function(){n.reject()})}),n.promise},getToken:function(){var e=t.defer();return c().then(function(){e.resolve(a.gapi.auth.getToken())}),e.promise},logout:function(){var e=t.defer();return c().then(function(){a.gapi.auth.setToken(null),o.isLogin(!1),o.getUser(null),e.resolve()}),e.promise},offline:function(){var e=t.defer();return l().then(function(t){e.resolve(t)},function(){e.reject()}),e.promise}}}]),e.factory("GClient",["$document","$q","$window","$timeout",function(e,t,n,r){function o(o){var i=t.defer();n._gapiOnLoad=function(){i.resolve()};var a=e[0].createElement("script");return a.onerror=function(e){r(function(){i.reject(e)})},a.src=o,e[0].body.appendChild(a),i.promise}var i=!1,a=!1,u=null,c=[];return{get:function(){var e=t.defer();return i?e.resolve():a?c.push(e):(a=!0,o("https://apis.google.com/js/client.js?onload=_gapiOnLoad").then(function(){n.gapi.client.setApiKey(u),i=!0,a=!1,e.resolve();for(var t=0;t<c.length;t++)c[t].resolve()})),e.promise},setApiKey:function(e){u=e,i&&n.gapi.client.setApiKey(u)},getApiKey:function(){return u}}}]),e.factory("GData",["$rootScope",function(e){e.gapi={};var t=!1,n=null,r=null;return{getUserId:function(){return r},setUserId:function(e){r=e},isLogin:function(n){if(0==arguments.length)return t;t=n,e.gapi.login=n},getUser:function(e){if(0==arguments.length)return n;n=e,null!==e&&(r=e.id)}}}])}(angular.module("angular-google-gapi",[])),function(e){var t=function(){function e(e,t){this.treesConfig=e,this.treeProperty=t,this.storage=localStorage,this._zoom=parseFloat(this.storage.getItem("defaultZoom"))||1,this._treeLayout="true"==this.storage.getItem("defaultTreeLayout"),this._treeSort=this.storage.getItem("defaultTreeSort")||"timestamp",this._treesSort=this.storage.getItem("defaultTreesSort")||this.treeProperty[this.treeProperty.modified],this._maxTreeDepth=parseInt(this.storage.getItem("defaultMaxTreeDepth"))||6,this._maxTreeBreadth=parseInt(this.storage.getItem("defaultMaxTreeBreadth"))||4,this._session_disabled="true"==this.storage.getItem("sessionDisabled"),this._hide_pinned="true"==this.storage.getItem("hidePinned"),this._hide_bookmarks="true"==this.storage.getItem("hideBookmarks"),this._hideLastTree="true"==this.storage.getItem("hideLastTree"),this._shareUrlWarningDisabled="true"==this.storage.getItem("shareUrlWarningDisabled"),this._reportGoogleDisabled="true"==this.storage.getItem("reportGoogleDisabled"),this._contentLanguage=this.storage.getItem("contentLanguage"),this._autoplayOff="true"==this.storage.getItem("autoplayOff"),this._announcement1="true"==this.storage.getItem("announcement1")}return Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this.storage.setItem("defaultZoom",e.toString()),this._zoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeLayout",{get:function(){return this._treeLayout},set:function(e){this.storage.setItem("defaultTreeLayout",e.toString()),this._treeLayout=e,this.treesConfig.treeCtrl.vertical=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeSort",{get:function(){return this._treeSort},set:function(e){this.storage.setItem("defaultTreeSort",e),this._treeSort=e,this.treesConfig.treeCtrl.sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treesSort",{get:function(){return this._treesSort},set:function(e){this.storage.setItem("defaultTreesSort",e),this._treesSort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeDepth",{get:function(){return this._maxTreeDepth},set:function(e){this.storage.setItem("defaultMaxTreeDepth",e.toString()),this._maxTreeDepth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeBreadth",{get:function(){return this._maxTreeBreadth},set:function(e){this.storage.setItem("defaultMaxTreeBreadth",e.toString()),this._maxTreeBreadth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionDisabled",{get:function(){return this._session_disabled},set:function(e){this.storage.setItem("sessionDisabled",e.toString()),this._session_disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidePinned",{get:function(){return this._hide_pinned},set:function(e){this.storage.setItem("hidePinned",e.toString()),this._hide_pinned=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideBookmarks",{get:function(){return this._hide_bookmarks},set:function(e){this.storage.setItem("hideBookmarks",e.toString()),this._hide_bookmarks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLastTree",{get:function(){return this._hideLastTree},set:function(e){this.storage.setItem("hideLastTree",e.toString()),this._hideLastTree=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareUrlWarningDisabled",{get:function(){return this._shareUrlWarningDisabled},set:function(e){this.storage.setItem("shareUrlWarningDisabled",e.toString()),this._shareUrlWarningDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reportGoogleDisabled",{get:function(){return this._reportGoogleDisabled},set:function(e){this.storage.setItem("reportGoogleDisabled",e.toString()),this._reportGoogleDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLanguage",{get:function(){return this._contentLanguage},set:function(e){this.storage.setItem("contentLanguage",e),this._contentLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoplayOff",{get:function(){return this._autoplayOff},set:function(e){this.storage.setItem("autoplayOff",e.toString()),this._autoplayOff=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"announcement1",{get:function(){return this._announcement1},set:function(e){this.storage.setItem("announcement1",e.toString()),this._announcement1=e},enumerable:!0,configurable:!0}),e}();e.value("UserSettingsStatic",t),e.value("animationEase","cubic-in-out").value("animationDuration",850),e.value("debug_data",!1).value("debug_mode",!1);var n;!function(e){e[e.str=0]="str",e[e.date=1]="date",e[e.rating=2]="rating",e[e.count=3]="count"}(n||(n={})),e.value("propertyType",n),angular.module("tnConfig").factory("placeholderImage",["$rootScope","trustAsResourceUrlFilter",function(e,t){return e.placeholderImage=t("img/default-placeholder.png"),e.placeholderImage}]),angular.module("tnConfig").value("placeholderUserImage","https://thebenclark.files.wordpress.com/2014/03/facebook-default-no-profile-pic.jpg").value("analyticsDialog",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/analytics-dialog.html",controller:"AnalyticsDialog",controllerAs:"analyticsDialog",onComplete:function(e){e.analyticsDialog.onload()}}),e.factory("nodesConfig",["propertyType",function(e){var t={},n=t.index={};return t.store="nodes",t.type={title:e.str,image:e.str,type:e.str,locked_image:e.str,visited:e.date,favicon:e.str,views:e.count,description:e.str,address:e.str},n[r[r.title]]={key:o[r.title],options:{unique:!1,multiEntry:!1}},n[r[r.visited]]={key:o[r.visited],options:{unique:!1,multiEntry:!1}},t.listCtrl={sortBy:r[r.visited],sortOrder:!1,searchText:"",selectedText:null,disableSort:!1,getSelectedText:function(){return this.selectedText},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},getText:function(){var e=this.getSelectedText();return e?e.text:this.getSearchText()},isSearch:function(){return!(!this.getSelectedText()&&!this.getSearchText())},type:{visited:t.type.visited,title:t.type.title},clearSearch:function(){this.searchText="",this.selectedText=null}},t}]);var r;!function(e){e[e.title=0]="title",e[e.image=1]="image",e[e.type=2]="type",e[e.locked_image=3]="locked_image",e[e.visited=4]="visited",e[e.favicon=5]="favicon",e[e.description=6]="description",e[e.tags=7]="tags",e[e.rss=8]="rss",e[e.geo=9]="geo",e[e.address=10]="address",e[e.isArticle=11]="isArticle",e[e.url=12]="url",e[e.facebook_id=13]="facebook_id",e[e.color=14]="color",e[e.og_image=15]="og_image",e[e.lang=16]="lang"}(r||(r={}));var o;!function(e){e[e.n=0]="n",e[e.i=1]="i",e[e.t=2]="t",e[e.l=3]="l",e[e.v=4]="v",e[e.f=5]="f",e[e.d=6]="d",e[e.k=7]="k",e[e.r=8]="r",e[e.g=9]="g",e[e.a=10]="a",e[e.c=11]="c",e[e.u=12]="u",e[e.b=13]="b",e[e.o=14]="o",e[e.m=15]="m",e[e.e=16]="e"}(o||(o={})),angular.module("tnConfig").value("nodeDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-dialog.html",controller:"NodeDialogCtrl",controllerAs:"vm",onComplete:function(e,t){t.find("#dialogContent_node-dialog").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("#dialogContent_node-dialog").mCustomScrollbar("destroy")}}).value("relatedDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,controller:function(){this.loading=!0},controllerAs:"relatedDialogCtrl",bindToController:!0,templateUrl:"partials/shared/related-dialog.html",onComplete:function(e,t){t.find("md-content").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("md-content").mCustomScrollbar("destroy")}}).value("nodeUrlDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-url-dialog.html",controllerAs:"vm"}).value("nodesProperties",r).value("nodesShortProperties",o),e.value("SCOPES",["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.email"]).value("API_KEY","AIzaSyCHbESTG-Tt_cir4j6swhSe73MmNxOMdAI").value("SECONDARY_API_KEY","AIzaSyAVFXhdstGRYa40dbjNhJmzKx4ASVrBpuA").value("DISQUS_FORUM","brancher").value("DISQUS_API_KEY","VGVs0rDj4Weg7I5d42NNgIukCqMhFv3PQQkh4WACRZJvvXEWzBXV0zUyTOfb7uMt").value("FB_ID","1099461436740953").value("FB_SCOPES",["user_friends"]).value("EBAY_CAMPID","5338007501").value("AMAZON_ID","brancher0b-20").value("ALIBABA_ID","928268164").value("ITUNES_TOKEN","").value("GOOGLE_OPTIMIZE_CODE","GTM-M56ZPVZ").factory("BUFFER_ID",["debug_mode",function(e){return e?"59c86e67aa7cc01b6bf6a1bc":"59c859ee285dcfbc478fcdee"}]).factory("BUFFER_REDIRECT_URI",["BASE_URL",function(e){return e+"/buffer"}]).constant("ANALYTICS_TRACKING_ID","UA-87007310-1").constant("GOOGLE_AD_CLIENT","ca-pub-4049546790962842").value("EXTENSION_ID","undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id||"dfanhpdcmhemhkjafmannijhneiplgec").value("CLIENT_ID","988709185566-o0jm430od2s08urqnsujfnli5a6572is.apps.googleusercontent.com").factory("BASE_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://brancher.io"}]).factory("BASE_API_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://getbrancher.appspot.com"}]).factory("BASE",["BASE_API_URL",function(e){return e+"/_ah/api"}]).factory("EXTENSION_URL",["EXTENSION_ID",function(e){return"https://chrome.google.com/webstore/detail/"+e}]).factory("STORAGE_URL",["BASE_API_URL",function(e){return e+".storage.googleapis.com/"}]),e.factory("treesConfig",["$rootScope","UserSettingsStatic","propertyType",function(e,t,n){var r={},o=e.userSettings=new t(r,i),u=r.index={},c=localStorage;return r.store="trees",r.MAX_CHILDREN=100,r.checkOverQuota=function(){var e=c.getItem("overQuotaNotification");return!e||+new Date-+new Date(e)>864e5},r.setOverQuota=function(){c.setItem("overQuotaNotification",(new Date).toISOString())},u[i[i.children]]={key:a[i.children],options:{unique:!1,multiEntry:!0}},u[i[i.created]]={key:a[i.created],options:{unique:!0,multiEntry:!1}},u[i[i.modified]]={key:a[i.modified],options:{unique:!0,multiEntry:!1}},u[i[i.title]]={key:a[i.title],options:{unique:!1,multiEntry:!1}},e.groupCtrl=r.groupCtrl={sortBy:o.treesSort,sortOrder:!1,disableSort:!1,treesSearch:{selectedNode:null,searchText:"",getSelectedNode:function(){return this.selectedNode},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},isSearch:function(){return!(!this.getSelectedNode()&&!this.getSearchText())},clear:function(){this.selectedNode=null,this.searchText=""},getText:function(){var e=this.getSelectedNode();return e?e.text:this.getSearchText()}},type:{created:n.date,modified:n.date,title:n.str,rating:n.rating,description:n.str,count:n.str,addedCount:n.count,views:n.count},updateSort:function(){var e=this,t=e.sortBy,r=e.sortOrder;switch(this.type[t]){case n.date:this.reverse=!r;break;case n.str:this.reverse=r;break;case n.rating:this.reverse=!0}}},r.treeCtrl={sortBy:o.treeSort,sortOrder:!1,vertical:o.treeLayout,isListed:!1,isExpanded:!1,type:{visited:n.date,timestamp:n.date,title:n.str},data:{visited:!0,timestamp:!1,title:!0}},e.groupCtrl.updateSort(),r}]);var i;!function(e){e[e.created=0]="created",e[e.modified=1]="modified",e[e.title=2]="title",e[e.description=3]="description",e[e.children=4]="children",e[e.parents=5]="parents",e[e.timestamps=6]="timestamps",e[e.original=7]="original",e[e.image=8]="image",e[e.favorite=9]="favorite",e[e.tags=10]="tags",e[e.seen=11]="seen",e[e.domains=12]="domains",e[e.lang=13]="lang"}(i||(i={}));var a;!function(e){e[e.t=0]="t",e[e.m=1]="m",e[e.n=2]="n",e[e.d=3]="d",e[e.c=4]="c",e[e.p=5]="p",e[e.s=6]="s",e[e.o=7]="o",e[e.i=8]="i",e[e.f=9]="f",e[e.g=10]="g",e[e.e=11]="e",e[e.a=12]="a",e[e.l=13]="l"}(a||(a={}));var u;!function(e){e[e.tree=0]="tree",e[e.link=1]="link",e[e.image=2]="image"}(u||(u={})),angular.module("tnConfig").value("treeProperty",i).value("treeShortProperty",a).value("linkEvent",u).value("dialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-dialog.html",controller:"TreeDialogCtrl",controllerAs:"vm"}).value("userImagesDialogConfig",{controller:"UserImagesDialogCtrl",controllerAs:"userImagesDialog",templateUrl:"partials/shared/user-images-dialog.html",hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,onComplete:function(e,t){t.find("#dialog-container").mCustomScrollbar(e.scrollConfig)},onRemoving:function(e){e.find("#dialog-container").mCustomScrollbar("destroy")}}).value("mapDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/map-dialog.html",controllerAs:"mapDialogCtrl",controller:["$scope","$timeout","$controller","maps","geolocation","geoNodes","title",function(e,t,n,r,o,i,a){e.mapDialogCtrl.title=a,t(function(){return n("MapDialogCtrl",{$scope:e,maps:r,geolocation:o,geoNodes:i})},850)}]}).value("reportDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/report-dialog.html",controller:"ReportDialogCtrl",controllerAs:"vm"}).value("subscriptionsDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/components/subscriptions-dialog.html",controller:"SubscriptionsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("treeEditorsDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-editors-dialog.html",controller:"TreeEditorsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("overQuotaNotification",{type:"basic",iconUrl:"img/icon128-disabled.png",title:"Storage quota exceeded!",message:"You have reached the maximum number of trees for a free user",contextMessage:"Please, upgrade to pro-account for the unlimited storage",requireInteraction:!0}).factory("deleteTreeConfirmDialog",["$mdDialog",function(e){return function(t){return e.confirm().title("Are you sure?").textContent("This tree will be deleted.").ariaLabel("Delete tree").targetEvent(t).ok("OK").cancel("Cancel")}}])}(angular.module("tnConfig",[])),function(e){e.factory("IDB",["$q","treesConfig","nodesConfig",function(e,t,n){var r=e.defer(),o={};indexedDB||r.reject({error:"IndexedDB not found"});var i=indexedDB.open("Trees",1);return o.IDBRange=IDBKeyRange,i.onupgradeneeded=function(e){var r=e.target,o=r.result,i=o.createObjectStore(t.store,{autoIncrement:!0}),a=o.createObjectStore(n.store);angular.forEach(t.index,function(e,t){return i.createIndex(t,e.key,e.options)}),angular.forEach(n.index,function(e,t){return a.createIndex(t,e.key,e.options)})},i.onsuccess=function(e){var t=e.target;o.IndexedDB=t.result,r.resolve(o)},i.onerror=function(){r.reject({error:"IndexedDB error"})},i.onblocked=function(){r.reject({error:"IndexedDB blocked"})},r.promise}])}(angular.module("tnIndexedDB",["tnConfig"])),function(e){e.value("URI",n(1)),e.factory("uriParser",["URI","AMAZON_ID","EBAY_CAMPID","ITUNES_TOKEN",function(e,t,n,r){function o(e){return"amazon"==e}function i(e){return"ebay"==e}function a(e){return"itunes.apple.com"==e||"geo.itunes.apple.com"==e}var u={},c=e("http://rover.ebay.com/rover/1/711-53200-19255-0/1"),s={google:"q",yahoo:"p",bing:"q",yandex:"text",duckduckgo:"q"},l={google:"/search",yahoo:"/search",bing:"/search",yandex:"/search/",duckduckgo:""},f={google:"www.google.com",yahoo:"www.yahoo.com",bing:"www.bing.com",yandex:"www.yandex.com",duckduckgo:"www.duckduckgo.com"},h={google:"https://www.google.com.ua/images/branding/product/ico/googleg_lodp.ico",yahoo:"https://www.google.com/s2/favicons?domain=www.yahoo.com",bing:"https://www.google.com/s2/favicons?domain=www.bing.com",yandex:"https://www.google.com/s2/favicons?domain=www.yandex.com",duckduckgo:"https://www.google.com/s2/favicons?domain=www.duckduckgo.com"},d=["/","/feed/subscriptions","/feed/trending","/feed/history","/dashboard","/my_videos","/view_all_playlists","/live_dashboard_splash","/my_live_events","/analytics","/timedtext_cs_queue","/upload"];return u.parseSERP=function(t){var n,r=t.domain(),o=t.host(),i={};if(i.isSERP=!1,-1!=r.indexOf("google")&&-1!=o.indexOf("www.google")?i.SE="google":-1!=r.indexOf("yahoo.com")?"www.yahoo.com"!=o&&-1==o.indexOf("search")||(i.SE="yahoo"):-1!=r.indexOf("bing.com")?i.SE="bing":-1!=o.indexOf("www.yandex")?i.SE="yandex":-1!=r.indexOf("duckduckgo")&&(i.SE="duckduckgo"),n=i.SE){var a=t.query(!0),u=t.fragment(),c=s[n];i.isSERP=!0,i.favicon=h[n],angular.merge(a,e.parseQuery(u));var d=a[c];if(d){i.title=e.decodeQuery(d);(i.query={})[c]=d,i.path=l[n],i.hostname=f[n]}}return i},u.parseImg=function(t,n){if(t){if("data:image"==t.slice(0,10))return t;var r=e(t.trim());return r.protocol()?t:(r.is("absolute")?r.protocol(n.protocol()):r.is("relative")&&(r=n.clone().path(t)),r.toString())}},u.applySERP=function(t,n,r){var o=r&&r.value;if(n.isSERP){if(!n.query)return e("");r&&(r.value={type:"web search",title:n.title.charAt(0).toUpperCase()+n.title.substring(1),image:o&&o.image,favicon:n.favicon,description:o&&o.description}),t.fragment("").hostname(n.hostname).search(n.query).path(n.path)}return t},u.sortQuery=function(e){var t=e.search(!0);e.search(""),angular.forEach(Object.keys(t).sort(),function(n){e.addSearch(n,t[n])})},u.isAffiliate=function(e){var t=e.domain().split(".")[0];return o(t)||i(t)||a(e.host())},u.makeAffiliateLink=function(e){var u=e.domain().split(".")[0],s=e;if(o(u)){var l=e.path().split("/"),f=e.query(!0);"s"==l[1]?e.path("/s").fragment("").query({url:"search-alias=aps","field-keywords":f["field-keywords"]}):(e.query("").fragment(""),"ref"==l[l.length-1].slice(0,3)&&e.path(l.slice(0,l.length-1).join("/"))),s=e.removeSearch("tag").addSearch("tag",t)}else if(i(u)){var h=e.host().split(".");s="rover"==h[0]?e.setSearch("campid",n).setSearch("toolid","10001"):c.clone().query({mpre:e.toString(),campid:n,toolid:"10001"})}else if(a(e.host())){var f=e.query(!0),d=f.i,g=f.mt,p={at:r};d&&(p.i=d),g&&(p.mt=g),s=e.host("geo.itunes.apple.com").query(p).fragment("")}return s},u.parseFacebook=function(t){if("www.facebook.com"==t.host()){var n=t.path(),r=n.split("/").filter(function(e){return!!e});if(!n||"/"==n||"/dialog/share"==n||"/photo.php"==n||"feed"==r[0]||"photos"==r[1])return e("");var o=t.query(!0),i=o.id,a=o.q;if(t.query(""),i&&t.addSearch("id",i),a&&t.addSearch("q",a),!i&&!a){var u="pg"==r[0];if("groups"==r[0]||"events"==r[0]||u)if(u)t.path("/"+r[1]);else{if(!r[1])return e("");t.path("/"+r[0]+"/"+r[1])}else t.path("/"+r[0])}}return t},u.parseYoutube=function(t){if("www.youtube.com"==t.host()){var n=t.path(),r=n.split("/").filter(function(e){return!!e});if(!n||d.indexOf(n)>-1)return e("");var o=t.query(!0),i=o.v,a=o.list,u=o.search_query||o.q;t.query(""),i&&t.addSearch("v",i),!i&&a&&t.addSearch("list",a),u&&t.addSearch("search_query",u),("user"==r[0]||"channel"==r[0])&&r.length>2&&t.path("/"+r[0]+"/"+r[1])}return t},u.parse=function(t,n){if("http"!=t.protocol().slice(0,4)||"jpg"==t.suffix()||"plus.google.com"==t.host()&&"/share"==t.path())return e("");var r=u.parseSERP(t);return t.removeSearch("brancher.io").normalize(),t=u.parseFacebook(t),t=u.parseYoutube(t),t=u.applySERP(t,r,n),u.sortQuery(t),t},u.getFacebookId=function(e){var t=e.path().split("/").filter(function(e){return!!e}),n="search"!=t[0]&&t[t.length-1];return e.query(!0).id||n},u}])}(angular.module("URIjs",[])),function(e){e.service("urlShortener",["$q","$http","$cacheFactory","$timeout","URI","API_KEY","SECONDARY_API_KEY",function(e,t,n,r,o,i,a){var u=this,c=u.cache=n("shortURL"),s="https://www.googleapis.com/urlshortener/v1/url",l=["AIzaSyDZ55puWPWIO2zobjnTKOCqBGgPaAy4Z84","AIzaSyCjEGKTgmYGTXI3NpLlo3Mf1dBqoryXdLI","AIzaSyBcHHVlKWr86BZKMoV4jkkn5n8FmKVWvYM","AIzaSyAJmJFAc0MrjNHK0Nolqwc0gxYX68gAUkk","AIzaSyDFSHG8nWrzCpW5U1dzj54WrfUPk9nfIZY","AIzaSyCkAIvQSBjLy_7Bm1tzbMGyXg_5mSeM1Zc","AIzaSyC24Zk19799bLRiiroB0_gy09uETSa2ADo","AIzaSyCGPK41uA6eb0LG0ahnV0qO98dcZlMTTMk","AIzaSyCyFGi0QfAMj4gNu9T4-1n5SOVSVfnRmEk","AIzaSyD_Po1pyDxSooiBMDuxCX9G68M1bOaXaaQ","AIzaSyCtExBA-lGdpKX1CeklHeHOprk4SrOdi-g","AIzaSyDlN44efeKER1U0DB0QCssiQacfrga6xy4"];u.shortenUrl=function(n,a,f){void 0===a&&(a=i),void 0===f&&(f=[]);var h=c.get(n);return h?e.when(h):t.post(s+"?key="+a,{longUrl:n}).then(function(t){return t.data&&t.data.id?(h=o(t.data.id).path().slice(1),c.put(n,h),h):e.reject()},function(t){if(403==t.status){var o=l.filter(function(e){return-1===f.indexOf(e)});if(o.length){var i=Math.floor(Math.random()*o.length),a=o[i];return f.push(a),r(1e3).then(function(){return u.shortenUrl(n,a,f)})}}return e.reject()})},u.analytics=function(e){return t.get(s,{params:{key:a,shortUrl:"http://goo.gl/"+e,projection:"FULL"}}).then(function(e){return e.data})}}])}(angular.module("tnUrlShortener",["tnConfig","angular-google-gapi","URIjs"])),function(e){e.service("util",["$rootScope",function(e){var t=this,n={sameDay:"[Today,] DD/MM/YYYY",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday,] DD/MM/YYYY",lastWeek:"[Last] dddd, DD/MM/YYYY",sameElse:"DD/MM/YYYY"};t.parseDate=function(e){if(angular.isDate(e))return e;if(angular.isString(e)){var t=new Date(e.replace("Z",""));return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))}return new Date},t.formatDateCalendar=function(e){return moment(e).calendar(null,n)},t.translate=function(e,t){return"translate("+e+"px, "+t+"px) "},t.scale=function(e,t){return angular.isUndefined(t)?"scale("+e+") ":"scale("+e+", "+t+") "},t.replaceProperties=function(e,t,n){angular.forEach(n,function(n){var r=t[n];r?e[n]=r:delete e[n]})},t.renameProperties=function(e,t,n){return angular.forEach(Object.keys(n),function(r){var o=n[r];if(delete n[r],o){var i=e[r];angular.isNumber(i)&&(n[t[i]]=o)}}),n},t.isPdf=function(e){return".pdf"==e.slice(e.length-4)},t.getUserLanguage=function(){return e.userSettings.contentLanguage?e.userSettings.contentLanguage:"undefined"==typeof navigator?"en":(navigator.language||"").split("-")[0]||"en"}}])}(angular.module("tnUtil",[])),function(e){e.service("dataUtil",["util","treeProperty","treeShortProperty","nodesProperties","nodesShortProperties",function(e,t,n,r,o){void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),this.renameTreeFromShort=angular.bind(e,e.renameProperties,n,t),this.renameTreeToShort=angular.bind(e,e.renameProperties,t,n),this.renameNodeFromShort=angular.bind(e,e.renameProperties,o,r),this.renameNodeToShort=angular.bind(e,e.renameProperties,r,o),this.distance=function(e,t,n,r){var o=(r-t).toRad(),i=(n-e).toRad(),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t.toRad())*Math.cos(r.toRad())*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}}])}(angular.module("tnDataUtil",["tnConfig","tnUtil"])),function(e){e.factory("nodesBackgroundStatic",["$q","urlShortener","nodesConfig","dataUtil",function(e,t,n,r){var o=n.store;return function(){function n(e,t){this.IndexedDB=e,this.IDBRange=t}return n.prototype.add=function(t,n){var i=e.defer(),a=this.IDBRange.only(t),u=this.IndexedDB.transaction([o],"readwrite"),c=u.objectStore(o);return u.oncomplete=function(){return i.resolve()},u.onerror=function(e){return i.reject(e)},c.openCursor(a).onsuccess=function(e){var o=e.target,i=o.result;if(i){var a=r.renameNodeFromShort(i.value);angular.extend(a,n),angular.extend(n,a),i.update(r.renameNodeToShort(a))}else{var u=o.source;r.renameNodeToShort(n),u.add(n,t),r.renameNodeFromShort(n)}n.visited&&(n.visited=n.visited.toISOString())},i.promise},n.prototype.addBulk=function(t){var n=e.defer(),i=this.IndexedDB.transaction([o],"readwrite"),a=i.objectStore(o),u=[];return i.oncomplete=function(){return n.resolve(u)},i.onerror=function(e){return n.reject(e)},angular.forEach(t,function(e,t){a.get(t).onsuccess=function(n){n.target.result||(a.add(r.renameNodeToShort(e),t),u.push(t))}}),n.promise},n.prototype.shortenLink=function(n){if(!n.child)return e.reject();var r=t.cache.get(n.parent),o=t.cache.get(n.child),i=n.value,a=n.image,u={child:o,parent:r,value:i,image:a};return o?e.when(u):t.shortenUrl(n.child).then(function(e){return u.child=e,u})},n.prototype.getNodes=function(t,n){var i=this;void 0===n&&(n=!1);var a=e.defer(),u=this.IndexedDB.transaction([o],"readonly"),c=u.objectStore(o),s=[];return u.oncomplete=function(){return a.resolve(s)},u.onerror=function(e){return a.reject(e)},angular.forEach(t,function(e){c.get(i.IDBRange.only(e)).onsuccess=function(){var t=event.target,o=t.result;o&&(r.renameNodeFromShort(o),o.value=e,n&&(delete o.visited,delete o.locked_image),s.push(o))}}),a.promise},n.prototype.clear=function(){var t=e.defer(),n=this.IndexedDB.transaction([o],"readwrite"),r=n.objectStore(o);return n.oncomplete=function(){return t.resolve()},n.onerror=function(e){return t.reject(e)},r.clear(),t.promise},n}()}]),e.factory("treesBackgroundStatic",["$q","URI","treesConfig","nodesConfig","dataUtil","linkEvent",function(e,t,n,r,o,i){function a(e){return e.toISOString()}function u(e){return t(e).host()}var c=n.store,s=n.MAX_CHILDREN;return function(){function t(e,t){this.IndexedDB=e,this.IDBRange=t}return t.prototype.getTreeByNode=function(t){var n=e.defer(),r=this.IndexedDB.transaction([c],"readwrite"),i=r.objectStore(c),u=i.index("children"),s=this.IDBRange.only(t);return u.openCursor(s).onsuccess=function(e){var t,r=e.target,i=r.result;if(i){t=i.value,o.renameTreeFromShort(t),t.seen=!0;var u=angular.copy(t);t.id=i.primaryKey,t.created=a(t.created),t.modified=a(t.modified),t.timestamps=t.timestamps.map(a),t.editable=!0,o.renameTreeToShort(u),i.update(u)}n.resolve(t)},r.onerror=function(e){return n.reject(e)},n.promise},t.prototype.hasNodeTree=function(t){var n=e.defer(),r=this.IndexedDB.transaction([c],"readwrite"),o=r.objectStore(c),i=o.index("children"),a=this.IDBRange.only(t);return r.onerror=function(e){return n.reject(e)},i.openKeyCursor(a).onsuccess=function(e){var t=e.target;n.resolve(!!t.result)},n.promise},t.prototype.getLast=function(){var t=this.IndexedDB.transaction([c],"readwrite"),n=t.objectStore(c).index("modified"),r=e.defer();return t.onerror=function(){return r.reject()},n.openCursor(null,"prev").onsuccess=function(e){var t=e.target,n=t.result;if(n){var i=n.value;o.renameTreeFromShort(i),i.id=n.primaryKey,i.count=i.children.length,i.editable=!0,i.seen=!0;var a=angular.copy(i);o.renameTreeToShort(a),n.update(a).onsuccess=function(){return r.resolve(i)}}else r.reject()},r.promise},t.prototype.addBulk=function(t){var n=e.defer(),r=this.IndexedDB.transaction([c],"readwrite"),i=r.objectStore(c);return r.oncomplete=function(){return n.resolve()},r.onerror=function(e){return n.reject(e)},angular.forEach(t,function(e){return i.add(o.renameTreeToShort(e))}),n.promise},t.prototype.newLink=function(t,n){var r,a=t.child,l=t.parent,f=t.value,h=e.defer(),d=this.IndexedDB.transaction([c],"readwrite"),g=d.objectStore(c),p=g.index("children"),m=this.IDBRange.only(l),v=u(f.url),b=new Date,y={created:null},k=!0;return d.oncomplete=function(){return h.resolve()},d.onerror=function(e){return h.reject(e)},p.openCursor(m).onsuccess=function(e){var c=e.target,d=c.result,g=c.source.objectStore;if(d&&k){var p=o.renameTreeFromShort(d.value);-1==p.children.indexOf(a)?y.created<p.created&&p.children.length<s&&(y=p,r=d.primaryKey):k=!1,d.continue()}else{if(!k)return;var m={link:t,timestamp:b.toISOString(),type:"link"};if(r)y.parents.push(l),y.children.push(a),y.timestamps.push(b),-1==y.domains.indexOf(v)&&y.domains.push(v),y.modified=b,f&&(y.image=y.image||f.image),o.renameTreeToShort(y),g.put(y,r).onsuccess=function(e){var t=e.target;o.renameTreeFromShort(y),m.linkType=i.link,m.tree=y,y.id=t.result,y.count=y.children.length,h.resolve(m)};else{var _={};if(_.created=b,_.modified=b,_.children=[l,a],_.parents=["ROOT",l],_.timestamps=[b,b],_.domains=[v],_.tags=[],n){var S=u(n.url);v!=S&&_.domains.unshift(S),_.title=n.title,_.image=n.locked_image||n.image,_.description=n.description,_.tags=n.tags,_.lang=n.lang}f&&(_.title=_.title||f.title,_.image=_.image||f.image,_.description=_.description||f.description,_.tags=_.tags||f.tags,_.lang=f.lang||_.lang),_.title=_.title||"Untitled",o.renameTreeToShort(_),g.add(_).onsuccess=function(e){var t=e.target;o.renameTreeFromShort(_),m.linkType=i.tree,m.tree=_,_.id=t.result,_.count=2,h.resolve(m)}}}},h.promise.then(function(e){if(!e)return{link:t,timestamp:b.toISOString(),type:"link"};var n=e.tree;return n.modified=n.modified.toISOString(),n.created=n.created.toISOString(),e})},t.prototype.clear=function(){var t=e.defer(),n=this.IndexedDB.transaction([c],"readwrite"),r=n.objectStore(c);return n.oncomplete=function(){return t.resolve()},n.onerror=function(e){return t.reject(e)},r.clear(),t.promise},t}()}])}(angular.module("tnDataBackground",["angular-google-gapi","tnIndexedDB","tnUrlShortener","tnDataUtil"])),function(e){e.service("ignoreListService",["URI",function(e){function t(e){r.setItem("ignoreList",e.join(" "))}var n=this,r=localStorage;n.getList=function(){var e=r.getItem("ignoreList");return e?e.split(" "):[]},n.addItem=function(r){var o=n.getList();if(r){-1===r.indexOf("//")&&(r="//"+r);var i=e(r).host();-1===o.indexOf(i)&&(o.push(i),t(o))}},n.removeItem=function(e){var r=n.getList(),o=r.indexOf(e);o>-1&&(r.splice(o,1),t(r))},n.hasItem=function(t){return-1!==n.getList().indexOf(e(t).host())},n.removeUrl=function(t){n.removeItem(e(t).host())}}])}(angular.module("tnIgnoreList",["URIjs"])),function(e){var t=function(){function e(e,t,n,r,o){this.$q=e,this.$http=n,this.GApi=r,this.GData=o,this.status=!1,this.storage=localStorage,this.logoutURL="https://www.facebook.com/logout.php",this.serviceURL="https://graph.facebook.com/v2.8/",t.facebook=this}return e.prototype.getAccessToken=function(){return this.access_token},e.prototype.removeAccessToken=function(){this.access_token=null,this.updateStatus()},e.prototype.setAccessToken=function(e){var t=e&&(e.access_token||e.accessToken);t?(this.access_token=t,this.updateStatus()):this.removeAccessToken()},e.prototype.fetchAccessToken=function(){return this.$q.when()},e.prototype.facebookLogin=function(e){return this.$q.when()},e.prototype.facebookLogout=function(){return this.$q.when()},e.prototype.publisherLogin=function(e){return this.$q.when([])},e.prototype.updateStatus=function(){this.status=!!this.getAccessToken()},e.prototype.getUser=function(t,n){return void 0===n&&(n="id,name,picture"),this.GApi.execute("user","get.node.facebook",{value:t}).then(function(t){return e.makeNodeUserObject(t)})},e.prototype.listUserPhotos=function(t,n,r){var o=this;return void 0===r&&(r="images,name"),this.execute(function(n,i){var a=e.fbCallback(i);o.$http.get(o.serviceURL+t+"/photos",{params:{access_token:n,fields:r}}).then(a,a)},n)},e.prototype.publish=function(e,t){var n=this.serviceURL+e.id+"/feed?access_token="+e.access_token;return this.$http.post(n,"link="+t).then(angular.noop)},e.fbCallback=function(e){return function(t){return e(t.data)}},e.makeNodeUserObject=function(e){var t=e.image;return{name:e.title,picture:{data:{url:t}},id:e.facebook_id}},e.prototype.listFriends=function(e){return this.$q.when({})},e.prototype.userSetup=function(){return this.$q.reject()},e.prototype.login=function(){var e=this;return this.simple_login().then(function(t){return e.facebookLogin(t)},function(){return e.removeAccessToken()})},e.prototype.simple_login=function(e){return this.$q.when("")},e.prototype.logout=function(){return this.$q.when()},e.prototype.getToken=function(e){return this.$q.when("")},e.prototype.getUsers=function(e,t){return this.$q.when([])},e.prototype.executeAPIMethod=function(e){var t=this,n=function(){return e().then(function(e){return e},function(n){return n&&401==n.code?t.getToken().then(e):t.$q.reject(n)})};return this.status?n():this.login().then(n)},e.prototype.execute=function(e,t,n,r){var o=this;void 0===t&&(t=""),void 0===n&&(n=this.$q.defer()),void 0===r&&(r=0);var i=this.getAccessToken(),a=function(e){var t=e.error;if(t)if(r<2)switch(t.type){case"OAuthException":o.GData.isLogin()?r<1?o.fetchAccessToken().then(function(){var e=o.getAccessToken();e&&e!=i?s():c()}):c():r<1?c():u(t);break;default:n.reject()}else u(t);else n.resolve(e)},u=function(e){o.removeAccessToken(),n.reject(),!e||"connected"==e.status&&"OAuthException"!=e.type||o.login()},c=function(){return o.getToken(!0).then(s,u)},s=function(){return o.execute(e,t,n,r+1)};return i?t?this.$http.get(t,{params:{access_token:i}}).then(function(e){return a(e.data)}):e(i,a):this.login().then(function(){o.status?s():n.reject()}),n.promise},e}();e.value("facebookSharedStatic",t);var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.factory("facebookAPIStatic",["$q","$rootScope","$window","$http","GApi","GData","GApiApp","firebaseService","URI","toastObserver","FB_SCOPES","BASE_URL","facebookSharedStatic",function(e,t,r,o,i,a,u,c,s,l,f,h,d){function g(e){return function(t){"connected"===t.status?e.resolve(t.authResponse.accessToken):e.reject(t)}}return function(d){function p(){return d.call(this,e,t,o,i,a)||this}return n(p,d),p.prototype.fetchAccessToken=function(){var t=this;return a.isLogin()?u.execute(function(){return i.executeAuth("user","facebook.token")}).then(function(e){return t.setAccessToken(e)},function(){return t.removeAccessToken()}):e.reject()},p.prototype.facebookLogin=function(e){var t=this;if(!e)return this.removeAccessToken(),this.$q.reject();var n,r={access_token:e};return a.isLogin()?n=u.execute(function(){return i.executeAuth("user","facebook.login",r)}).then(function(e){return t.setAccessToken(e)},function(){return t.setAccessToken(r)}).then(function(){return c.loginFacebook(t.getAccessToken())}):(this.setAccessToken(r),n=c.loginFacebook(e).then(function(n){return t.GApi.execute("user","facebook.user",{firebase_token:n,access_token:e})})),n},p.prototype.publisherLogin=function(e){var t=this;return u.execute(function(){return i.executeAuth("user","facebook.publisher",{access_token:e})}).then(function(e){return t.groups=e.groups,e.groups})},p.prototype.publish=function(e,t){return d.prototype.publish.call(this,e,t).then(function(){return l.notifyObservers("Successfully posted to "+e.name)})},p.prototype.facebookLogout=function(){var e=this.$q.when();return this.removeAccessToken(),a.isLogin()&&(e=u.execute(function(){return i.executeAuth("user","facebook.logout")})),e.then(function(){return c.logoutFacebook()})},p.prototype.getToken=function(){var e=this,t=this.$q.defer();return FB.getLoginStatus(g(t)),t.promise.then(function(t){return e.setAccessToken({access_token:t}),t})},p.prototype.simple_login=function(e){void 0===e&&(e=f);var t=this.$q.defer();return FB.login(g(t),{scope:e.join(",")}),t.promise},p.prototype.userSetup=function(){var t=e.when(this.getAccessToken());return this.status||(t=this.getToken()),t.then(function(e){return c.loginFacebook(e)}).then(angular.noop)},p.prototype.logout=function(){var e=this.logoutURL,t=this.getAccessToken();return this.facebookLogout().then(function(){var n=s(e).query({next:h+"/",access_token:t});r.location.href=n.toString()})},p.prototype.getUsers=function(e){if(e.length)return this.GApi.execute("user","get.nodes.facebook",{nodes:e}).then(function(e){return e.nodes&&e.nodes.map(p.makeNodeUserObject)})},p.prototype.listFriends=function(e,t){var n=this;return void 0===t&&(t="id,name,picture"),this.execute(function(e,r){var o=p.fbCallback(r);n.$http.get(n.serviceURL+"me/friends",{params:{access_token:e,fields:t}}).then(o,o)},e)},p}(d)}])}(angular.module("tnDataFacebook",["tnConfig"])),function(e){var t=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.factory("facebookControlStatic",["GApiExtension","chromeIdentity","URI","facebookExtensionRedirectURL","facebookAPIStatic",function(e,n,r,o,i){return function(i){function a(){return null!==i&&i.apply(this,arguments)||this}return t(a,i),a.prototype.getToken=function(){var e=this;return n.launchWebAuthFlow(o()).then(function(t){return e.setAccessToken(t),t.access_token})},a.prototype.simple_login=function(e){return n.launchWebAuthFlow(o(e),!0).then(function(e){return e.access_token})},a.prototype.logout=function(){var e=this,t=r(this.logoutURL).query({next:"https://www.facebook.com",access_token:this.getAccessToken()});return n.logout(t.toString()).then(function(){return e.facebookLogout()})},a.prototype.fetchAccessToken=function(){var t=this;return e.execute(function(){return i.prototype.fetchAccessToken.call(t)})},a.prototype.facebookLogin=function(t){var n=this;return e.execute(function(){return i.prototype.facebookLogin.call(n,t)})},a.prototype.facebookLogout=function(){var t=this;return e.execute(function(){return i.prototype.facebookLogout.call(t)})},a}(i)}])}(angular.module("tnDataFacebookExtension",["tnDataFacebook"])),function(e){e.service("chromeRuntime",["$rootScope","$q","EXTENSION_ID",function(e,t,n){var r=this,o=chrome.runtime;o.onMessage.addListener(function(t,n,r){return e.$emit(t.type,t,n,r),!0}),r.sendMessage=function(e){var r=t.defer();return o.sendMessage(n,e,function(e){var t=o.lastError||e&&e.error;t?r.reject(t):r.resolve(e)}),r.promise}}])}(angular.module("tnChromeShared",["tnConfig"])),function(e){e.service("chromeIdentity",["$q","URI",function(e,t){var n=this,r=chrome.identity,o=chrome.runtime;n.launchWebAuthFlow=function(n,i){void 0===i&&(i=!1);var a=e.defer(),u={interactive:i,url:n};return r.launchWebAuthFlow(u,function(e){if(o.lastError)a.reject();else{var n=t(e).fragment(),r=t.parseQuery(n);r.access_token?a.resolve(r):a.reject()}}),a.promise},n.getAuthToken=function(t,n){if(void 0===t&&(t=!1),!r)return e.when("");var i=e.defer(),a={interactive:t};return n&&(a.scopes=n),r.getAuthToken(a,function(e){o.lastError?i.reject():i.resolve(e)}),i.promise},n.removeCachedAuthToken=function(t){var n=e.defer();return r.removeCachedAuthToken({token:t},function(){return n.resolve()}),n.promise},n.logout=function(t){var n=e.defer(),o={interactive:!0,url:t};return r.launchWebAuthFlow(o,function(){return n.resolve()}),n.promise},n.getRedirectURL=function(e){return r.getRedirectURL(e)}}]),e.service("chromeNotifications",["$q","$rootScope",function(e,t){var n=this,r=chrome.notifications;r.onClicked.addListener(function(e){t.$emit("notification:click",e)}),n.create=function(t,n){var o=e.defer();return r.getPermissionLevel(function(e){"granted"==e?r.create(t,n,function(){return o.resolve()}):o.reject()}),o.promise}}]),e.service("chromeTabs",["$q","URI","uriParser",function(e,t,n){function r(e){return e.id}function o(r){var o=[],i=[];if(r)return r.forEach(function(e){if(e.url&&"http"==e.url.slice(0,4)&&!s.test(e.url)){var r=c.executeScript(e.id,"content_scripts/canonical.js").then(function(t){return e.url=t||e.url},angular.noop).finally(function(){return e.url=n.parse(t(e.url).normalize()).toString()});i.push(e),o.push(r)}}),e.all(o).then(function(){return i})}var i=chrome.tabs,a=chrome.windows,u=chrome.runtime,c=this,s=new RegExp("://chrome.google.com/webstore");c.getCurrent=function(){var t=e.defer();return i.getCurrent(function(e){return t.resolve(e)}),t.promise},c.create=function(e,t,n){void 0===t&&(t=e),c.query(t).then(function(t){if(t)c.highlightWindow(t.windowId),i.highlight({tabs:t.index,windowId:t.windowId},angular.noop);else{var r={url:e};angular.isNumber(n)&&(r.windowId=n,c.highlightWindow(n)),i.create(r)}})},c.query=function(n){var r=e.defer();return i.query({},function(e){return r.resolve(e)}),r.promise.then(o).then(function(e){if(n){for(var r=t(n),o=void 0,i=0;i<e.length;i+=1)if(r.equals(e[i].url)){o=e[i];break}return o}return e})},c.remove=function(t){var n=e.defer();return i.remove(t,function(){return n.resolve()}),n.promise},c.highlight=function(t){var n=e.defer();return i.highlight({tabs:t.index,windowId:t.windowId},function(){return n.resolve(t.windowId)}),n.promise},c.highlightWindow=function(t){var n=e.defer();return a.update(t,{focused:!0},function(){return n.resolve()}),n.promise},c.reload=function(t){var n=e.defer();return i.reload(t,null,function(){return n.resolve()}),n.promise},c.getWindow=function(t){var n=e.defer();return a.get(t,function(e){return n.resolve(e)}),n.promise},c.createWindow=function(t){var n=e.defer();return a.create(t,function(e){return n.resolve(e)}),n.promise},c.getTabs=function(n){var r=e.defer(),o=n.map(function(e){return t(e)});return c.query().then(function(e){r.resolve(e&&e.filter(function(e){return o.some(function(t){return t.equals(e.url)})}))}),r.promise},c.getWindowURIs=function(n){var r=e.defer();return a.get(n,{populate:!0},function(e){return r.resolve(e.tabs)}),r.promise.then(o).then(function(e){return e.map(function(e){return t(e.url)})})},c.openTabs=function(t,n){function r(n){var r=[];return t.forEach(function(t){var o=e.defer();r.push(o.promise),i.create({windowId:n,url:t},function(){return o.resolve()})}),e.all(r).then(function(){return n})}return angular.isNumber(n)?c.highlightWindow(n).then(function(){return r(n)}):c.createWindow({focused:!0}).then(function(t){var n=t.tabs[0].id;return r(t.id).then(function(t){var r=e.defer();return i.remove(n,function(){return r.resolve()}),r.promise.then(function(){return t})})})},c.closeTabs=function(t){var n=e.defer();return c.getTabs(t).then(function(e){i.remove(e.map(r),function(){return n.resolve()})}),n.promise},c.moveTabs=function(t,n){function o(e,t){if(!e||!e.length)return a.resolve(t);i.move(e.map(r),{windowId:t,index:-1},function(){return a.resolve(t)})}var a=e.defer();return c.getTabs(t).then(function(e){if(!e||!e.length)return a.resolve(n);angular.isNumber(n)?(c.highlightWindow(n),o(e.filter(function(e){return e.windowId!=n}),n)):c.createWindow({focused:!0,tabId:e[0].id}).then(function(t){return o(e.slice(1),t.id)})}),a.promise},c.executeScript=function(t,n,r,o){void 0===r&&(r=0);var a=e.defer(),c={runAt:"document_idle",frameId:r};return n?c.file=n:c.code=o,i.executeScript(t,c,function(e){u.lastError?a.reject(u.lastError):(e=e||[],a.resolve(e[0]))}),a.promise},c.insertCSS=function(t,n,r){void 0===r&&(r=0);var o=e.defer(),a={file:n,runAt:"document_idle",frameId:r};return i.insertCSS(t,a,function(){return o.resolve()}),o.promise},c.executeScripts=function(t,n,r){void 0===r&&(r=0);var o=e.when();return n.forEach(function(e){o=o.then(function(){return c.executeScript(t,e,r)})}),o},c.getTab=function(t){var n=e.defer();return i.get(t,function(e){return n.resolve(e)}),n.promise},c.openApp=function(){i.create({url:"control.html"})},c.reloadApp=function(e){i.update(e,{url:"control.html"})}}])}(angular.module("tnChrome",["tnChromeShared","URIjs"])),function(e){e.factory("facebookExtensionRedirectURL",["chromeIdentity","URI","FB_ID","FB_SCOPES",function(e,t,n,r){var o=e.getRedirectURL("provider_cb");return function(e){return void 0===e&&(e=r),t("https://www.facebook.com/dialog/oauth").query({client_id:n,redirect_uri:o,scope:e.join(","),response_type:"token",access_type:"online"}).toString()}}]).factory("GApiExtension",["$q","$timeout","GAuth","GData","chromeIdentity",function(e,t,n,r,o){var i={};return i.login=function(e){return void 0===e&&(e=!1),o.getAuthToken(e).then(angular.noop,angular.noop).then(function(){return o.getAuthToken()}).then(function(e){if(navigator.onLine)return n.setToken({access_token:e})}).then(angular.noop,angular.noop).then(function(){return r.getUser()})},i.execute=function(t,n){return void 0===n&&(n=2),n?o.getAuthToken().then(function(r){return gapi.auth.setToken({access_token:r}),t().then(function(e){return e},function(a){return 401==a.code?o.removeCachedAuthToken(r).then(function(){return i.execute(t,n-1)}):e.reject(a)})},t):e.reject()},i.isLogin=function(){var t=r.isLogin(),i=function(){return!1};return t?e.when(!0):o.getAuthToken().then(function(e){return n.setToken({access_token:e}).then(function(){return!0},function(){return o.removeCachedAuthToken(e).then(i,i)})},i)},i}]).factory("createOverQuotaNotification",["chromeNotifications","overQuotaNotification","treesConfig",function(e,t,n){return function(){n.checkOverQuota()&&e.create("overQuota",t).then(n.setOverQuota)}}])}(angular.module("tnDataExtension",["tnIgnoreList","tnDataFacebookExtension","tnChrome","tnDataUtil"])),function(e){e.run(["treesConfig",function(e){}]),e.service("chromeBrowserAction",["$rootScope","$q",function(e,t){var n=chrome.browserAction,r=this,o=e.userSettings;n.setBadgeText({text:""}),e.$on("event:session",function(e,t,n,i){void 0===i&&(i=angular.noop),r.enabled=!r.enabled,r.updateIcon(),o.sessionDisabled=!r.enabled,i()}),e.$on("get:session",function(e,t,n,o){o(r.enabled)}),r.enabled=!o.sessionDisabled,r.updateCount=function(e){var r=t.defer();return e<1?t.when():(n.getBadgeText({},function(t){var o=((parseInt(t)||0)+e||"").toString();n.setBadgeText({text:o}),r.resolve()}),r.promise)},r.updateIcon=function(){var e={path:"img/"+(r.enabled?"icon16.png":"icon16-disabled.png")};n.setIcon(e)},r.updateIcon()}]),e.service("chromeContextMenus",["$rootScope",function(e){var t=chrome.contextMenus,n=function(){return console.log(chrome.runtime.lastError)};t.onClicked.addListener(function(t,n){"lock"==t.menuItemId?e.$emit("link:image",n.url,t.srcUrl):"link"==t.menuItemId&&e.$emit("link:favorite",t.linkUrl)}),t.create({id:"lock",title:"Choose as thumbnail for this page",contexts:["image"]},n),t.create({id:"link",title:"Add to favorites",contexts:["link"]},n)}]),e.service("chromeRuntimeBackground",["$q",function(e){var t=this,n=chrome.runtime,r=e.defer();n.onInstalled.addListener(function(e){r.resolve(e)}),t.onInstalled=r.promise}]),e.service("chromeSessions",["$q","URI","uriParser","ignoreListService","blacklist",function(e,t,n,r,o){var i=this,a=new Date(0),u=[];i.getUrls=function(){var i=e.defer();return chrome.sessions.getDevices(function(e){var c=[],s=[],l=r.getList();e&&e.forEach(function(e){e.sessions&&e.sessions.forEach(function(e){new Date(1e3*e.lastModified)>a&&(e.window&&e.window.tabs.forEach(function(e){return e.url&&c.push(e.url)}),e.tab&&e.tab.url&&c.push(e.tab.url))})}),a=new Date,c.forEach(function(e){var r=n.parse(t(e)),i=r.toString();if(-1===o.indexOf(r.domain())&&-1===l.indexOf(r.host())&&-1===u.indexOf(i)){var a=n.parseSERP(r);i&&!a.isSERP&&"www.facebook.com"!=r.host()&&"m.facebook.com"!=r.host()&&(s.push(i),u.push(i))}}),i.resolve(s)}),i.promise}}]),e.service("chromeWebNavigation",["$rootScope",function(e){chrome.webNavigation.onHistoryStateUpdated.addListener(function(t){return e.$broadcast("event:webnav",t)})}]),e.service("chromeWebRequest",["$rootScope","$cacheFactory",function(e,t){var n=chrome.webRequest,r=t("redirects",{capacity:20});n.onBeforeRedirect.addListener(function(t){var n=t.requestId,o=r.get(n);angular.isObject(o)?(o.parent=o.child,o.child=t.redirectUrl):o={child:t.redirectUrl,parent:t.url},e.$emit("link:redirect",o),r.put(n,o)},{urls:["<all_urls>"],types:["main_frame"]})}])}(angular.module("tnChromeBackground",["tnChrome","tnConfig"])),function(e){e.run(["GAuth","CLIENT_ID","SCOPES",function(e,t,n){e.setClient(t),e.setScope(n.join(" "))}])}(angular.module("tnGapiShared",["angular-google-gapi","tnConfig"])),function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n(2),n(3));n(4),n(5);var o=function(){function e(e){if(this.$q=e,this.firebase=r,this.refs={},r){var t={apiKey:"AIzaSyAVFXhdstGRYa40dbjNhJmzKx4ASVrBpuA",authDomain:"getbrancher.firebaseapp.com",databaseURL:"https://getbrancher.firebaseio.com",storageBucket:"getbrancher.appspot.com",messagingSenderId:"988709185566"};this.firebase.initializeApp(t),this.database=this.firebase.database()}}return e.prototype.getToken=function(e){var t=this.$q.defer();return e?(e.getToken().then(function(e){return t.resolve(e)}).catch(function(){return t.reject()}),t.promise):this.$q.reject()},e.prototype.login=function(e){var t=this,n=this.$q.defer(),r=this.firebase.auth(),o=r.currentUser,i=function(e){return n.resolve(e)};return o?o.providerData.some(function(t){return t.providerId==e.providerId})?i(o):this.link(o,e).then(i,function(){return i(o)}):r.signInWithCredential(e).then(i,function(e){return n.reject(e)}),n.promise.then(function(e){return t.getToken(e)})},e.prototype.signInWithPopup=function(e,t){var n=this,r=this.$q.defer();return this.firebase.auth().signInWithPopup(e).then(function(e){return r.resolve(e.user)}).catch(function(e){return r.reject(e)}),r.promise.then(function(e){return n.link(e,t)}).then(function(e){return n.getToken(e)})},e.prototype.onAuthError=function(e,t){var n=this;return function(r){switch(r.code){case"auth/account-exists-with-different-credential":case"auth/internal-error":return n.signInWithPopup(e,t)}return n.$q.reject()}},e.prototype.link=function(e,t){var n=this.$q.defer();return e.linkWithCredential(t).then(function(e){return n.resolve(e)},function(){return n.reject()}),n.promise},e.prototype.onAuthStateChanged=function(e){this.firebase.auth().onAuthStateChanged(function(t){return e(!!t)})},e.prototype.loginFacebook=function(e){var t=this.firebase.auth.FacebookAuthProvider.credential(e);return this.login(t).then(function(e){return e},this.onAuthError(new this.firebase.auth.GoogleAuthProvider,t))},e.prototype.loginGoogle=function(e){var t=this.firebase.auth.GoogleAuthProvider.credential(null,e);return this.login(t).then(function(e){return e},this.onAuthError(new this.firebase.auth.FacebookAuthProvider,t))},e.prototype.logoutFacebook=function(){return this.logout("facebook.com")},e.prototype.logoutGoogle=function(){return this.logout("google.com")},e.prototype.logout=function(e){var t=this.firebase.auth().currentUser;return t&&t.providerData.some(function(t){return t.providerId==e})?this.unlink(e):this.$q.when()},e.prototype.unlink=function(e){var t=this.$q.defer();return this.firebase.auth().currentUser.unlink(e).then(function(){return t.resolve()},function(){return t.reject()}),t.promise},e.prototype.on=function(t,n,r){var o=this.database.ref(t);o.on(n,function(e){return r(e.val(),function(){return e.ref.remove()})}),this.refs[e.ref_key(t,n)]=o},e.prototype.off=function(t,n){var r=this.refs[e.ref_key(t,n)];r&&r.off()},e.prototype.push=function(e,t){var n=this.$q.defer();return this.database.ref(e).push(JSON.parse(JSON.stringify(t))).then(function(){return n.resolve()}).catch(function(e){return n.reject(e)}),n.promise},e.prototype.update=function(e,t){var n=this.$q.defer();return this.database.ref(e).update(t),n.promise},e.prototype.onDataWithRemove=function(e,t,n,r){if(e<moment().day(-1).toDate())return void r();e>t&&n()},e.ref_key=function(e,t){return e+"_"+t},e}();e.factory("firebaseService",["$q",function(e){return new o(e)}])}(angular.module("tnFirebase",[])),function(e){e.run(["GApi","BASE",function(e,t){e.load("tree","v1",t),e.load("user","v1",t)}]).factory("GApiShared",["GAuth","GApi","GData","firebaseService","SCOPES",function(e,t,n,r,o){var i=this;return i.loginUser=function(o){return void 0===o&&(o=!1),e.getToken().then(function(e){return r.loginGoogle(e.access_token)}).then(function(e){return t.executeAuth("user","store.user",{check_license:o,firebase_token:e})}).then(function(){return n.getUser()})},i.getYoutubeScope=function(){var e=o.slice(0);return e.push("https://www.googleapis.com/auth/youtube","https://www.googleapis.com/auth/youtube"),e},i}])}(angular.module("tnGapi",["tnGapiShared","tnFirebase"])),function(e){e.factory("maps",["$rootScope","$window","$compile","$templateCache","$q","$timeout","API_KEY",function(e,t,n,r,o,i,a){var u,c,s=angular.element("<script>")[0],l=r.get("partials/shared/marker-info-window.html"),f=n(l),h=o.defer(),d={};return d.onLoad=h.promise.catch(angular.noop),s.src="https://maps.googleapis.com/maps/api/js?key="+a+"&callback=initMap&language=en",s.onerror=function(){return h.reject()},t.initMap=function(){h.resolve(),u=new google.maps.Geocoder,c=new google.maps.DistanceMatrixService},document.head.appendChild(s),d.geocodeNode=function(e){var t=o.defer();return u?(u.geocode({address:e.address},function(n,r){if(r===google.maps.GeocoderStatus.OK){var o=n[0],i=o.geometry.location;e.address=o.formatted_address,e.geo=i.lat()+", "+i.lng()}t.resolve()}),t.promise):o.reject()},d.createMap=function(e,t){var n=new google.maps.Map(e,{zoom:10});return n.addListener("click",t),n},d.createUserMarker=function(e,t){return new google.maps.Marker({position:{lat:t.latitude,lng:t.longitude},map:e,title:"My location",icon:"img/my-location.png"})},d.createNodeMarker=function(t,n,r){function o(e){s.setContent(e[0]),i(a,100)}function a(){s.open(t,c)}var u=n.geo.split(","),c=new google.maps.Marker({position:{lat:parseFloat(u[0]),lng:parseFloat(u[1])},map:t,title:n.title}),s=new google.maps.InfoWindow,l=e.$new(!0);return l.node=n,c.addListener("click",function(){if(s.getContent())return s.setContent(""),s.setZIndex(1),void s.close();f(l,o),r(),s.setZIndex(2)}),s.addListener("closeclick",function(){s.setContent(""),s.setZIndex(1)}),{marker:c,infoWindow:{value:s,scope:l}}},d.clearInstanceListeners=function(e){google.maps.event.clearInstanceListeners(e)},d.setUserDistances=function(e,t){c.getDistanceMatrix({origins:[e.getPosition()],destinations:t.map(function(e){return e.marker.getPosition()}),travelMode:google.maps.TravelMode.DRIVING},function(e,n){n==google.maps.DistanceMatrixStatus.OK&&e.rows[0].elements.forEach(function(e,n){if(e.status==google.maps.DistanceMatrixElementStatus.OK){t[n].infoWindow.scope.info={duration:e.duration.text,distance:e.distance.text}}})})},d}])}(angular.module("tnMaps",["tnConfig"])),function(e){e.factory("youtube",["$http","$q","SECONDARY_API_KEY",function(e,t,n){var r={};return r.getNode=function(r){var o=r.query(!0),i=o.v,a=o.search_query;if(i)return e.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"snippet",key:n,id:i}}).then(function(e){var n=e.data.items&&e.data.items[0];if(!n||!n.snippet)return t.reject();var o=n.snippet,i={};return i.url=r.toString(),i.title=o.title,i.description=o.description&&o.description.replace(/(\r\n|\n|\r|\s+)/gm," ").trim().slice(0,500),i.type="video",i.tags=o.tags&&o.tags.map(function(e){return e.trim().toLocaleLowerCase()}).filter(function(e,t,n){return e&&e.length<25&&n.indexOf(e)==t}).slice(0,10),i});if(a){var u={};return u.title=a,u.type="search",t.when(u)}return t.reject()},r}])}(angular.module("tnYoutube",["tnConfig"])),function(e){e.service("colorThief",["$q",function(e){var t=n(8),r=n(9),o=new t,i=this,a={};i.getColor=function(t){if(!t)return e.when("");var n=a[t];if(n)return e.when(n);var i=new Image,u=e.defer();return i.src=t,i.crossOrigin="Anonymous",i.onload=function(){if(n=a[t])return void u.resolve(n);try{var e=o.getColor(i),c=r("rgb("+e.join(",")+")"),s=c.getBrightness()/255;s>.85&&c.darken(100*(s-.85)),n=c.toRgbString(),a[t]=n,u.resolve(n)}catch(e){u.resolve("")}},i.onerror=function(){return u.resolve("")},u.promise}}])}(angular.module("tnColorThief",[])),function(e){var t=function(e,t,n){function r(e,t){return e.then(function(e){return new t(e.IndexedDB,e.IDBRange)})}e.factory("trees",["IDB","treesBackgroundStatic",function(e,t){return r(e,t)}]),e.factory("nodes",["IDB","nodesBackgroundStatic",function(e,t){return r(e,t)}]),e.factory("facebook",["facebookControlStatic",function(e){return new e}]),e.value("toastObserver",null),e.factory("GApiApp",function(){return{execute:function(e){return e()}}}),n.otherwise("/"),t.state("main",{template:"",url:"/",controller:"BackgroundCtrl",resolve:{trees:"trees",nodes:"nodes",MapsInit:["maps",function(e){return e.onLoad}],userAuth:["GApiExtension",function(e){return e.login().catch(angular.noop)}]}})};t.$inject=["$provide","$stateProvider","$urlRouterProvider"];var n=function(e,t,n,r,o,i){};n.$inject=["chromeRuntime","chromeWebNavigation","chromeBrowserAction","chromeRuntimeBackground","chromeContextMenus","chromeWebRequest"],e.config(t).run(n),setTimeout(function(){return angular.bootstrap(document.body,["background"])}),e.controller("BackgroundCtrl",["$rootScope","$window","$q","$http","$timeout","$interval","$cacheFactory","$queueFactory","URI","GAuth","GData","GApi","GApiShared","GApiExtension","trees","nodes","facebook","urlShortener","uriParser","linksBackground","chromeRuntimeBackground","chromeIdentity","chromeTabs","chromeSessions","chromeBrowserAction","blacklist",function(e,t,n,r,o,i,a,u,c,s,l,f,h,d,g,p,m,v,b,y,k,_,S,w,x,A){function I(e){O[e]&&O[e].disconnect(),delete O[e]}function T(e){S.executeScript(e,null,0,"typeof removeRelated === 'function' && removeRelated();")}function C(e){var t=O[e];t&&t.postMessage({type:"page:close"}),I(e),S.executeScript(e,null,0,"typeof removeTree === 'function' && removeTree();")}function D(e){void 0===e&&(e=-1),chrome.tabs.query({},function(t){t&&t.forEach(function(t){t.id!=e&&t.url&&"http"==t.url.slice(0,4)&&C(t.id)})})}var $=a("relatedNodes",{capacity:5}),O={};new PageFactory,u();l.isLogin()&&h.loginUser(!0),m.userSetup(),e.$on("clear:trees",function(e,t,n,r){return g.clear().then(r)}),e.$on("clear:nodes",function(e,t,n,r){return p.clear().then(r)}),e.$on("GAuth:token",function(e,t,n,r){d.login().then(r),D()}),e.$on("GAuth:get",function(e,t,n,r){function o(){return _.getAuthToken().then(function(e){return r({access_token:e})})}void 0===r&&(r=angular.noop),l.isLogin()?o():t.interactive?d.login(!0).then(function(){return h.loginUser(!0)}).then(o).then(function(){D(n&&n.tab.id);var e=chrome.extension.getViews({type:"tab"})[0];e&&e.close()},r):r()}),e.$on("GAuth:youtube",function(e,t,n,r){var o=h.getYoutubeScope();_.getAuthToken(!1,o).then(function(e){return e},function(){return _.getAuthToken(!0,o)}).then(function(e){return r({access_token:e})})}),e.$on("GAuth:logout",function(e,t,n,r){s.logout().then(r),D()}),e.$on("auth:facebook",function(e,t,n,r){var o=function(){return r(m.getAccessToken())};t.interactive?m.login().then(o):m.status?o():r()}),e.$on("page:init",function(e,n,r,o){void 0===o&&(o=angular.noop);var i=r.tab.id;O[i]=chrome.tabs.connect(i,{name:n.id.toString(),frameId:r.frameId}),t.closeRelatedNodesPopup(i),o()}),e.$on("page:close",function(e,t,n,r){C(n.tab.id),r()}),e.$on("command",function(e,t,n,r){void 0===r&&(r=angular.noop),r(),angular.forEach(O,function(e,r){if(!n.tab.id||r.toString()!=n.tab.id.toString())try{e.postMessage(t)}catch(e){I(r)}})}),e.$on("popup:related",function(e,t,n,r){var o=t.value;if(!o)return r();var i=b.parse(c(o)),a=i.toString(),u=b.parseSERP(i);if(!a||u.isSERP)return r();v.shortenUrl(a).then(function(e){var t=$.get(e);return t?r(t):f.execute("user","nodes.related",{query:e,limit:3,isArticle:!0}).then(function(t){r(t),$.put(e,t)})})}),t.closeRelatedNodesPopup=function(e){o(T,250,!1,e)},t.addEventListener("online",function(){"undefined"==typeof gapi&&location.reload()}),e.$on("popup:tree",function(e,t,n,r){var o=t.value;if(!o)return r();var i=b.parse(c(o)).toString();if(!i)return r();v.shortenUrl(i).then(function(e){return l.isLogin()?d.execute(function(){return f.executeAuth("user","has.node.tree",{value:e})}).then(function(e){return e.more}):g.hasNodeTree(e)}).then(r)}),e.$on("popup:domain",function(e,t,n,r){var o=t.value;if(!o||!l.isLogin())return r();var i=c(o).host();return d.execute(function(){return f.executeAuth("user","has.publish.domain",{url:i})}).then(function(e){return e.more}).then(r)}),e.$on("popup:node",function(e,t,n,r){var o=t.value;if(!o||!l.isLogin())return r();var i=b.parse(c(o)).toString();if(!i)return r("disable");v.shortenUrl(i).then(function(e){return d.execute(function(){return f.executeAuth("user","has.node.favorites",{value:e})}).then(function(e){return e.more})}).then(r)}),e.$on("event:favorite",function(t,n,r,o){var i=n.value;if(!i)return o();if(!l.isLogin())return e.$emit("GAuth:get",{interactive:!0}),o(!0);var a=b.parse(c(i)).toString();v.shortenUrl(a).then(function(e){return d.execute(function(){return f.executeAuth("user",n.favorite?"add.node.favorites":"remove.node.favorites",{value:e})})}).then(function(){return o(!1)},function(){return o(!0)})}),e.$on("event:publish",function(t,n,r,o){var i=n.value;if(!i)return o();if(!l.isLogin())return e.$emit("GAuth:get",{interactive:!0}),o(!0);var a=c(i).host();return a?d.execute(function(){return f.executeAuth("user",n.publish?"add.publish.domain":"remove.publish.domain",{url:a})}).then(function(){return o(!1)},function(){return o(!0)}):o(!0)}),e.$on("page:tree",function(e,t,n,r){var o=n.tab;S.executeScript(o.id,"content_scripts/canonical.js").then(function(e){return e||o.url}).then(function(e){if(!e)return r();var t=b.parse(c(e)).toString();if(!t)return r();v.shortenUrl(t).then(function(e){var t;return t=l.isLogin()?d.execute(function(){return f.executeAuth("user","get.node.tree",{value:e})}):g.getTreeByNode(e),t.then(function(t){return t.selectedPage=e,t})}).then(r).catch(function(){r(),C(o.id)})})}),e.$on("newtab:tree",function(e,t,r,o){var i;i=l.isLogin()?d.execute(function(){return f.executeAuth("user","get.last.tree")}):g.getLast(),i.then(function(e){return e&&(e.id||angular.isNumber(e.id))?n.when(e):n.reject()}).then(o).catch(function(){return C(r.tab.id)})}),e.$on("newtab:click",function(e,t,n,r){r(),chrome.tabs.update(n.tab.id,{url:t.url})}),e.$on("newtab:hide",function(e,t,n,r){S.executeScript(n.tab.id,null,0,"showLastTreeChange()")}),chrome.tabs.onUpdated.addListener(function(e,t,n){"complete"==t.status&&(0===n.title.indexOf("chrome-extension://"+chrome.runtime.id+"/")?S.reloadApp(e):"chrome://newtab/"==n.url&&x.enabled)}),chrome.tabs.onRemoved.addListener(I),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){var t=e.requestHeaders;if(-1!==e.url.indexOf("brancher.io=1"))for(var n=0;n<t.length;n+=1)if("User-Agent"===t[n].name){t[n].value="facebookexternalhit/1.1";break}return{requestHeaders:t}},{urls:["<all_urls>"]},["requestHeaders","blocking"]),y.nodes=p,y.trees=g}]),e.factory("blacklist",["$http",function(e){function t(e){e&&e.data&&e.data.forEach(function(e){var t=e.parent_domain||e.domain;t&&-1===n.indexOf(t)&&"twitter.com"!=t&&"pinterest.com"!=t&&"microsoft.com"!=t&&"cnet.com"!=t&&"bing.com"!=t&&"yahoo.com"!=t&&"tumblr.com"!=t&&"reddit.com"!=t&&"mozilla.org"!=t&&"google.com"!=t&&"opera.com"!=t&&"apple.com"!=t&&"search.yahoo.com"!=t&&"amazon.com"!=t&&"amazon.co"!=t&&n.push(t)})}var n=["adf.ly","vk.com"];return e.get(chrome.extension.getURL("/components/sites.json")).then(t).then(function(){return e.get(chrome.extension.getURL("/components/sites_old.json"))}).then(t),n}]),e.service("linksBackground",["$rootScope","$q","$cacheFactory","$window","$timeout","$http","$queueFactory","GApi","GData","GApiExtension","firebaseService","URI","maps","youtube","chromeRuntime","chromeTabs","chromeBrowserAction","chromeIdentity","uriParser","ignoreListService","colorThief","createOverQuotaNotification","blacklist","BASE_URL","linkEvent",function(e,t,n,r,o,i,a,u,c,s,l,f,h,d,g,p,m,v,b,y,k,_,S,w,x){function A(e){E.put(e.child.toString(),e)}function I(e){B.enqueue(function(e){return R.nodes.shortenLink(e).then(function(t){return t.value&&(t.value.url=e.child),t}).then(function(e){return s.isLogin().then(function(t){return L(e,t)})}).then(function(){return o(1e3)}).catch(angular.noop)},null,[e])}function T(e){if(!angular.isObject(e)||!angular.isString(e.child)||0===e.child.length)return t.reject();var n=y.getList(),r=!!e.parent,o=f(e.child),i=f(e.parent||""),a=e.type,u=e.canonical,c=e.image,s=e.title,l=e.facebook_id;if(o.is("relative")){if(!r)return t.reject();o=i.clone().query(o.query()).path(o.path())}if(-1<n.indexOf(o.host())||-1!=S.indexOf(o.domain())||-1===N.indexOf(o.protocol()))return t.reject();(-1<n.indexOf(i.host())||-1!=S.indexOf(i.domain())||r&&-1===N.indexOf(i.protocol()))&&(i=f("")),o=b.parse(o,e),i=b.parse(i),c=b.parseImg(c,o);var h=e.value,d=t.when({child:o,parent:i,value:h,type:a,canonical:u,image:c,title:s,facebook_id:l}),g=d;if(o.toString()&&h)if("PDF"!=h.type){var p=function(){return d};if(h.image=b.parseImg(h.image,o),h.favicon=b.parseImg(h.favicon,o),"www.youtube.com"==o.host()){var m=o.query(!0).v,v=o.path().split("/").filter(function(e){return!!e});m&&(h.image="https://img.youtube.com/vi/"+m+"/hqdefault.jpg"),"user"!=v[0]&&"channel"!=v[0]||(h.type="profile"),h.favicon="https://www.youtube.com/favicon.ico",h.isArticle=!1}else("www.netflix.com"==o.host()||b.isAffiliate(o))&&(h.isArticle=!1);if(!h.favicon){var _=t.defer(),w=new Image;w.onload=function(){h.favicon=w.src,_.resolve()},w.onerror=function(){h.favicon="",_.resolve()},w.src="https://www.google.com/s2/favicons?domain="+o.domain(),g=g.then(function(){return _.promise}).then(p)}}else{var v=o.clone().query("").fragment("").path();".pdf"==v.slice(v.length-4)&&(v=v.slice(0,v.length-4));var x=v.split("/");h.title=x[x.length-1].split("_").join(" ").split("-").join(" ").trim()}return g.then(function(e){return e.value&&e.value.favicon?k.getColor(e.value.favicon).then(function(t){return e.value.color=t,e}):e})}function C(n){return T(n).then(function(r){var o=r.child.toString(),a=r.parent.toString();if(!o)return t.reject();var c=E.get(o),s=r.image,l=r.title,h=r.canonical,g=r.facebook_id,p=r.value;if(c){var m=c.canonical;E.remove(o),a=c.parent.toString()||a,m&&(a=b.parse(f(m)).toString()||a)}h&&(o=b.parse(f(h)).toString()||o);var v={child:o,parent:a,image:s};return R.nodes.shortenLink(v).then(function(e){var n={};return n.values=R.nodes.getNodes([e.child]),n.shortLinkData=e,t.all(n)}).then(function(a){var c=a.values,f=a.shortLinkData;if(v.value=c[0],v.value)return angular.extend(v.value,p),v;var h,m=function(){return v.value=p,v};switch(r.child.host()){case"www.facebook.com":var y=g||b.getFacebookId(r.child),k=function(e){return e.image=e.image||s,e.title=e.title||l,e.value=e.value||f.child,e.url=e.url||o,v.value=e,v},_=function(){var e=l.indexOf(")");return p.value=f.child,p.image=s,p.facebook_id=g,p.title=l.slice(e+1).trim(),m()};if(!y)return _();h=u.execute("user","get.node.facebook",{value:y}).then(k,_);break;case"www.youtube.com":h=d.getNode(r.child).then(function(e){return e.title=e.title||l,e.value=f.child,e.image=p.image||s,e.favicon=p.favicon,e.color=p.color,v.value=e,v},function(){return i.get(r.child.addSearch("brancher.io","1").toString()).then(function(t){var r=G.parseFromString(t.data);n.type="link:referrer",delete n.facebook_id,e.$emit("link:data",{html:PageFactory.getDocumentText(r),data:n,type:"link:data"})}),t.reject()});break;default:h=m()}return h})}).then(I,angular.noop).then(function(){return o(1e3)}).catch(angular.noop)}function D(e,n){var r=e.value,o=e.child;return o&&angular.isString(o)&&r?(r.title=r.title||r.url,r.visited=new Date(n),R.nodes.add(o,r)):t.when()}function $(e){var n=e.value;return n.address&&!n.geo?h.geocodeNode(n):t.when()}function O(e){if(e){var n=t.defer(),r=e.description||"";return chrome.i18n.detectLanguage(e.title+" "+r,function(t){t&&t.languages&&t.languages.length?e.lang=t.languages[0].language:e.lang="en",n.resolve()}),n.promise}}function L(n,r){if(!angular.isObject(n))return t.reject();var o=(new Date).toISOString(),i=n.child,a=n.parent,f=n.image,h=function(e,t){t&&t.image&&"data:image"==t.image.slice(0,10)||(!e||e.image!=t.image&&e.og_image!=t.image?t&&(t.og_image=t.image):(t.og_image=t.image,t.image=f||t.image))},d=function(e){delete e.visited,delete e.locked_image,delete e.og_image},p=function(e){var t={type:"link",timestamp:o,link:n};if(n.value&&!e[0]){h(null,n.value);var r=angular.copy(n.value);return r.value=i,d(r),u.execute("tree","new.node",{timestamp:o,tree:{nodes:[r]}}).then(function(e){return angular.extend(t.link.value,e.tree.nodes[0]),t},function(){return t})}return angular.extend(t.link.value,e[0]),t};return i?(i==a&&(n.parent=a=null),n.value.facebook_id||delete n.value.facebook_id,m.enabled||(a=""),i&&a&&(p=r?function(e){var t=e[0];h(t,n.value);var r=angular.copy(n.value),c=[r],l={timestamp:o,link:{child:i,parent:a},tree:{nodes:c,published:"true"==j.getItem("defaultPublish")}};return d(r),r.value=i,t&&(d(t),c.push(t)),v.getAuthToken().then(function(e){return l.token=e,s.execute(function(){return u.executeAuth("tree","new.link",l)})}).then(function(e){var t=e.result,r=t.linkType;if(t.type="link",r&&(t.linkType=x[r]),t.tree&&angular.isArray(t.tree.nodes)){var o=t.tree.nodes[0];o&&(o.og_image=n.value.og_image,o.visited=t.timestamp)}return t.overQuota&&_(),t},function(){return l})}:function(e){return h(e[0],n.value),R.trees.newLink(n,e[0]).then(function(r){var a=t.when(r),c=a,s=angular.copy(n.value);if(angular.isNumber(r.linkType)&&s){var l=[s],f={timestamp:o,tree:{nodes:l}},h=e[0];h&&(d(h),l.push(h)),d(s),s.value=i,c=u.execute("tree","new.node",f).then(function(e){return angular.extend(r.link.value,e.tree.nodes[0]),r},function(){return a})}return c})}),$(n).then(function(){return O(n.value)}).then(function(){return R.nodes.getNodes([a||i],!0)}).then(p).then(function(t){var n=t.linkType;if(angular.isNumber(n))switch(n){case x.link:break;case x.tree:m.updateCount(1)}return t.tree&&(t.tree.nodes&&(t.link.value=t.tree.nodes[0]),delete t.tree.nodes,delete t.tree.children,delete t.tree.parents,delete t.tree.timestamps),delete t.alt,delete t.etag,delete t.kind,delete t.result,delete t.token,D(t.link,o).then(function(){var r={type:t.type,value:t},o=angular.copy(r);n==x.link&&(o.type+=":"+t.tree.id),c.isLogin()?(l.push("users/"+c.getUser().id+"/links",r).catch(angular.noop),n==x.link&&l.push("trees/"+t.tree.shortUrl+"/commands",o).catch(angular.noop)):(g.sendMessage(r),n==x.link&&(e.$emit("command",o,{tab:{}}),g.sendMessage(o)))})}).then(angular.noop,angular.noop)):t.reject()}var R=this,j=localStorage,E=n("links",{capacity:20}),q=n("tabs",{capacity:20}),U=n("google",{capacity:100}),P=n("auth",{capacity:750}),B=a(),M=a(),N=["http","https"],F=new Worker("content_scripts/worker.js"),G=new PageFactory;F.onmessage=function(t){var n=t.data;e.$emit(n.type,n)},e.$on("link:data",function(n,r,o){var i,a=r.data,c=a.child,s=P.get(c);i=s?t.when({isBlocked:s.b}):u.execute("user","node.auth",{url:c}).then(function(e){return P.put(c,{b:e.isBlocked}),e}),i.then(function(t){t.isBlocked||(a.favicon=o&&o.tab.favIconUrl,r.html?F.postMessage(r):e.$emit(a.type,a))})}),e.$on("link:referrer",function(e,t){T(t).then(function(e){var t=e.child.toString(),n=e.parent.fragment("").toString(),r=E.get(t),o=e.value,i=e.image;if(r){var a=b.parseSERP(r.parent);E.remove(t),n=!r.canonical||a.isSERP?r.parent.fragment("").toString()||n:b.parse(f(r.canonical)).toString()}return t=e.canonical?b.parse(f(e.canonical)).toString():e.child.fragment("").toString(),{child:t,parent:n,value:o,image:i}}).then(I)}),e.$on("event:webnav",function(e,t){if(0===t.frameId){var n=t.tabId;b.parseSERP(f(t.url)).isSERP||p.getTab(n).then(function(e){e&&e.url&&f(e.url).equals(t.url)&&p.executeScript(n,"content_scripts/web-nav.js")})}}),e.$on("link:webnav",function(e,t){M.enqueue(C,null,[t])}),e.$on("link:google",function(e,t,n,r){void 0===r&&(r=angular.noop),T(t).then(function(e){var t=n.tab.id.toString(),r=e.child.toString(),o=e.value,i=U.get(t);return U.put(t,r),{child:r,parent:i,value:o}}).then(I),r()}),e.$on("link:click",function(e,t){T(t).then(A)}),e.$on("link:form",function(e,t){T(t).then(A)}),e.$on("link:redirect",function(e,t){T(t).then(function(e){var t=e.parent.fragment("").toString(),n=E.get(t);if(n){e.child.fragment("");var r=n.child=e.child;E.remove(t),E.put(r.toString(),n)}})}),e.$on("link:image",function(e,t,n){T({child:t}).then(function(e){return R.nodes.shortenLink({child:e.child.fragment("").toString()}).then(function(e){return R.nodes.getNodes([e.child])}).then(function(e){if(e[0]){var t={locked_image:n},r={linkType:x.image,link:{child:e[0].value,value:t}};g.sendMessage({type:"link",value:r}),R.nodes.add(e[0].value,t)}})})}),e.$on("link:favorite",function(t,n){if(n){if(!c.isLogin())return void e.$emit("GAuth:get",{interactive:!0});var r=f(n);0==r.host().indexOf("www.google.com")&&"/url"==r.path()&&(n=r.search(!0).url||n),u.execute("user","get.node",{url:n}).then(function(e){var t=e.value;return s.execute(function(){return u.executeAuth("user","add.node.favorites",{value:t})})})}}),chrome.tabs.onUpdated.addListener(function(e,t){if(t.url){var n=e.toString(),r=b.parse(f(t.url)),o=r.toString(),i=q.get(n);if(i){var a=E.get(i);a&&(a.child=r,E.put(o,a),E.remove(i))}q.put(n,o)}})}])}(angular.module("background",["ui.router","ngQueue","tnDataBackground","tnDataExtension","tnChromeBackground","URIjs","tnGapi","tnMaps","tnFirebase","tnYoutube","tnColorThief","tnIgnoreList"]))},function(e,t,n){e.exports=n(0)(27)},function(e,t){var n=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.update=function(e){this.context.putImageData(e,0,0)},n.prototype.getPixelCount=function(){return this.width*this.height},n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},n.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var r=function(){};if(r.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},r.prototype.getPalette=function(e,t,r){void 0===t&&(t=10),(void 0===r||1>r)&&(r=10);for(var o,a,u,c,s=new n(e),l=s.getImageData(),f=l.data,h=s.getPixelCount(),d=[],g=0;h>g;g+=r)o=4*g,a=f[o+0],u=f[o+1],c=f[o+2],f[o+3]>=125&&(a>250&&u>250&&c>250||d.push([a,u,c]));var p=i.quantize(d,t),m=p?p.palette():null;return s.removeCanvas(),m},!o)var o={map:function(e,t){var n={};return t?e.map(function(e,r){return n.index=r,t.call(n,e)}):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,r,o){return n.index=o,e+t.call(n,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?o.map(e,t):e)}};var i=function(){function e(e,t,n){return(e<<2*s)+(t<<s)+n}function t(e){function t(){n.sort(e),r=!0}var n=[],r=!1;return{push:function(e){n.push(e),r=!1},peek:function(e){return r||t(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return r||t(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return r||t(),n}}}function n(e,t,n,r,o,i,a){var u=this;u.r1=e,u.r2=t,u.g1=n,u.g2=r,u.b1=o,u.b2=i,u.histo=a}function r(){this.vboxes=new t(function(e,t){return o.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function i(t){var n,r,o,i,a=1<<3*s,u=new Array(a);return t.forEach(function(t){r=t[0]>>l,o=t[1]>>l,i=t[2]>>l,n=e(r,o,i),u[n]=(u[n]||0)+1}),u}function a(e,t){var r,o,i,a=1e6,u=0,c=1e6,s=0,f=1e6,h=0;return e.forEach(function(e){r=e[0]>>l,o=e[1]>>l,i=e[2]>>l,a>r?a=r:r>u&&(u=r),c>o?c=o:o>s&&(s=o),f>i?f=i:i>h&&(h=i)}),new n(a,u,c,s,f,h,t)}function u(t,n){if(n.count()){var r=n.r2-n.r1+1,i=n.g2-n.g1+1,a=n.b2-n.b1+1,u=o.max([r,i,a]);if(1==n.count())return[n.copy()];var c,s,l,f,h,d=0,g=[],p=[];if(u==r)for(c=n.r1;c<=n.r2;c++){for(f=0,s=n.g1;s<=n.g2;s++)for(l=n.b1;l<=n.b2;l++)h=e(c,s,l),f+=t[h]||0;d+=f,g[c]=d}else if(u==i)for(c=n.g1;c<=n.g2;c++){for(f=0,s=n.r1;s<=n.r2;s++)for(l=n.b1;l<=n.b2;l++)h=e(s,c,l),f+=t[h]||0;d+=f,g[c]=d}else for(c=n.b1;c<=n.b2;c++){for(f=0,s=n.r1;s<=n.r2;s++)for(l=n.g1;l<=n.g2;l++)h=e(s,l,c),f+=t[h]||0;d+=f,g[c]=d}return g.forEach(function(e,t){p[t]=d-e}),function(e){var t,r,o,i,a,u=e+"1",s=e+"2",l=0;for(c=n[u];c<=n[s];c++)if(g[c]>d/2){for(o=n.copy(),i=n.copy(),t=c-n[u],r=n[s]-c,a=r>=t?Math.min(n[s]-1,~~(c+r/2)):Math.max(n[u],~~(c-1-t/2));!g[a];)a++;for(l=p[a];!l&&g[a-1];)l=p[--a];return o[s]=a,i[u]=o[s]+1,[o,i]}}(u==r?"r":u==i?"g":"b")}}function c(e,n){function c(e,t){for(var n,r=1,o=0;f>o;)if(n=e.pop(),n.count()){var i=u(s,n),a=i[0],c=i[1];if(!a)return;if(e.push(a),c&&(e.push(c),r++),r>=t)return;if(o++>f)return}else e.push(n),o++}if(!e.length||2>n||n>256)return!1;var s=i(e),l=0;s.forEach(function(){l++});var d=a(e,s),g=new t(function(e,t){return o.naturalOrder(e.count(),t.count())});g.push(d),c(g,h*n);for(var p=new t(function(e,t){return o.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});g.size();)p.push(g.pop());c(p,n-p.size());for(var m=new r;p.size();)m.push(p.pop());return m}var s=5,l=8-s,f=1e3,h=.75;return n.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,r=n.histo;if(!n._count_set||t){var o,i,a,u=0;for(o=n.r1;o<=n.r2;o++)for(i=n.g1;i<=n.g2;i++)for(a=n.b1;a<=n.b2;a++)index=e(o,i,a),u+=r[index]||0;n._count=u,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,r=n.histo;if(!n._avg||t){var o,i,a,u,c,l=0,f=1<<8-s,h=0,d=0,g=0;for(i=n.r1;i<=n.r2;i++)for(a=n.g1;a<=n.g2;a++)for(u=n.b1;u<=n.b2;u++)c=e(i,a,u),o=r[c]||0,l+=o,h+=o*(i+.5)*f,d+=o*(a+.5)*f,g+=o*(u+.5)*f;n._avg=l?[~~(h/l),~~(d/l),~~(g/l)]:[~~(f*(n.r1+n.r2+1)/2),~~(f*(n.g1+n.g2+1)/2),~~(f*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var t=this,n=e[0]>>l;return gval=e[1]>>l,bval=e[2]>>l,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},r.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,o=this.vboxes,i=0;i<o.size();i++)n=Math.sqrt(Math.pow(e[0]-o.peek(i).color[0],2)+Math.pow(e[1]-o.peek(i).color[1],2)+Math.pow(e[2]-o.peek(i).color[2],2)),(t>n||void 0===t)&&(t=n,r=o.peek(i).color);return r},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return o.naturalOrder(o.sum(e.color),o.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,r=e[n].color;r[0]>251&&r[1]>251&&r[2]>251&&(e[n].color=[255,255,255])}},{quantize:c}}();e.exports=r},function(e,t,n){var r;!function(o){function i(e,t){if(e=e||"",t=t||{},e instanceof i)return e;if(!(this instanceof i))return new i(e,t);var n=a(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=z(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=z(this._r)),this._g<1&&(this._g=z(this._g)),this._b<1&&(this._b=z(this._b)),this._ok=n.ok,this._tc_id=G++}function a(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,c=!1;return"string"==typeof e&&(e=B(e)),"object"==typeof e&&(P(e.r)&&P(e.g)&&P(e.b)?(t=u(e.r,e.g,e.b),a=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):P(e.h)&&P(e.s)&&P(e.v)?(r=E(e.s),o=E(e.v),t=f(e.h,r,o),a=!0,c="hsv"):P(e.h)&&P(e.s)&&P(e.l)&&(r=E(e.s),i=E(e.l),t=s(e.h,r,i),a=!0,c="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=C(n),{ok:a,format:e.format||c,r:W(255,Y(t.r,0)),g:W(255,Y(t.g,0)),b:W(255,Y(t.b,0)),a:n}}function u(e,t,n){return{r:255*D(e,255),g:255*D(t,255),b:255*D(n,255)}}function c(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,o,i=Y(e,t,n),a=W(e,t,n),u=(i+a)/2;if(i==a)r=o=0;else{var c=i-a;switch(o=u>.5?c/(2-i-a):c/(i+a),i){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:o,l:u}}function s(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var o,i,a;if(e=D(e,360),t=D(t,100),n=D(n,100),0===t)o=i=a=n;else{var u=n<.5?n*(1+t):n+t-n*t,c=2*n-u;o=r(c,u,e+1/3),i=r(c,u,e),a=r(c,u,e-1/3)}return{r:255*o,g:255*i,b:255*a}}function l(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,o,i=Y(e,t,n),a=W(e,t,n),u=i,c=i-a;if(o=0===i?0:c/i,i==a)r=0;else{switch(i){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:o,v:u}}function f(e,t,n){e=6*D(e,360),t=D(t,100),n=D(n,100);var r=o.floor(e),i=e-r,a=n*(1-t),u=n*(1-i*t),c=n*(1-(1-i)*t),s=r%6;return{r:255*[n,u,a,a,c,n][s],g:255*[c,n,n,u,a,a][s],b:255*[a,a,c,n,n,u][s]}}function h(e,t,n,r){var o=[j(z(e).toString(16)),j(z(t).toString(16)),j(z(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(e,t,n,r,o){var i=[j(z(e).toString(16)),j(z(t).toString(16)),j(z(n).toString(16)),j(q(r))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function g(e,t,n,r){return[j(q(r)),j(z(e).toString(16)),j(z(t).toString(16)),j(z(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s-=t/100,n.s=$(n.s),i(n)}function m(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s+=t/100,n.s=$(n.s),i(n)}function v(e){return i(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l+=t/100,n.l=$(n.l),i(n)}function y(e,t){t=0===t?0:t||10;var n=i(e).toRgb();return n.r=Y(0,W(255,n.r-z(-t/100*255))),n.g=Y(0,W(255,n.g-z(-t/100*255))),n.b=Y(0,W(255,n.b-z(-t/100*255))),i(n)}function k(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l-=t/100,n.l=$(n.l),i(n)}function _(e,t){var n=i(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,i(n)}function S(e){var t=i(e).toHsl();return t.h=(t.h+180)%360,i(t)}function w(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+120)%360,s:t.s,l:t.l}),i({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+90)%360,s:t.s,l:t.l}),i({h:(n+180)%360,s:t.s,l:t.l}),i({h:(n+270)%360,s:t.s,l:t.l})]}function A(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+72)%360,s:t.s,l:t.l}),i({h:(n+216)%360,s:t.s,l:t.l})]}function I(e,t,n){t=t||6,n=n||30;var r=i(e).toHsl(),o=360/n,a=[i(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,a.push(i(r));return a}function T(e,t){t=t||6;for(var n=i(e).toHsv(),r=n.h,o=n.s,a=n.v,u=[],c=1/t;t--;)u.push(i({h:r,s:o,v:a})),a=(a+c)%1;return u}function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){L(e)&&(e="100%");var n=R(e);return e=W(t,Y(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function $(e){return W(1,Y(0,e))}function O(e){return parseInt(e,16)}function L(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function R(e){return"string"==typeof e&&-1!=e.indexOf("%")}function j(e){return 1==e.length?"0"+e:""+e}function E(e){return e<=1&&(e=100*e+"%"),e}function q(e){return o.round(255*parseFloat(e)).toString(16)}function U(e){return O(e)/255}function P(e){return!!Z.CSS_UNIT.exec(e)}function B(e){e=e.replace(N,"").replace(F,"").toLowerCase();var t=!1;if(K[e])e=K[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Z.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(e))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),a:U(n[4]),format:t?"name":"hex8"}:(n=Z.hex6.exec(e))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),format:t?"name":"hex"}:(n=Z.hex4.exec(e))?{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),a:U(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=Z.hex3.exec(e))&&{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),format:t?"name":"hex"}}function M(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var N=/^\s+/,F=/\s+$/,G=0,z=o.round,W=o.min,Y=o.max,H=o.random;i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r,i,a,u=this.toRgb();return e=u.r/255,t=u.g/255,n=u.b/255,r=e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4),i=t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4),a=n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*a},setAlpha:function(e){return this._a=C(e),this._roundA=z(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=z(360*e.h),n=z(100*e.s),r=z(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=z(360*e.h),n=z(100*e.s),r=z(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:z(this._r),g:z(this._g),b:z(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+z(this._r)+", "+z(this._g)+", "+z(this._b)+")":"rgba("+z(this._r)+", "+z(this._g)+", "+z(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:z(100*D(this._r,255))+"%",g:z(100*D(this._g,255))+"%",b:z(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+z(100*D(this._r,255))+"%, "+z(100*D(this._g,255))+"%, "+z(100*D(this._b,255))+"%)":"rgba("+z(100*D(this._r,255))+"%, "+z(100*D(this._g,255))+"%, "+z(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Q[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=i(e);n="#"+g(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return i(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},i.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:E(e[r]));e=n}return i(e,t)},i.equals=function(e,t){return!(!e||!t)&&i(e).toRgbString()==i(t).toRgbString()},i.random=function(){return i.fromRatio({r:H(),g:H(),b:H()})},i.mix=function(e,t,n){n=0===n?0:n||50;var r=i(e).toRgb(),o=i(t).toRgb(),a=n/100;return i({r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a})},i.readability=function(e,t){var n=i(e),r=i(t);return(o.max(n.getLuminance(),r.getLuminance())+.05)/(o.min(n.getLuminance(),r.getLuminance())+.05)},i.isReadable=function(e,t,n){var r,o,a=i.readability(e,t);switch(o=!1,r=M(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=a>=4.5;break;case"AAlarge":o=a>=3;break;case"AAAsmall":o=a>=7}return o},i.mostReadable=function(e,t,n){var r,o,a,u,c=null,s=0;n=n||{},o=n.includeFallbackColors,a=n.level,u=n.size;for(var l=0;l<t.length;l++)(r=i.readability(e,t[l]))>s&&(s=r,c=i(t[l]));return i.isReadable(e,c,{level:a,size:u})||!o?c:(n.includeFallbackColors=!1,i.mostReadable(e,["#fff","#000"],n))};var K=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=i.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(K),Z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=i:void 0!==(r=function(){return i}.call(t,n,t,e))&&(e.exports=r)}(Math)}]);