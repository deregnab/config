!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t){e.exports=popup},function(e,t,n){e.exports=n(0)(15)},function(e,t,n){n(1),n(3),n(4),n(5),n(6),function(e){e.provider("Analytics",function(){var e,t,n,r,o,i=!0,a="auto",c=!1,s=!1,u="USD",l=!1,d=!1,f=!1,g=!1,p=!1,h=!1,m=!1,v=!1,y=!1,b=!1,_=!1,k="$routeChangeSuccess",S=!1,w=!1,E=!1,C="",I=!0,T=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(t){return e=angular.isUndefined(t)||!1===t?void 0:angular.isArray(t)?t:angular.isObject(t)?[t]:[{tracker:t,trackEvent:!0}],this},this.trackPages=function(e){return I=!!e,this},this.trackPrefix=function(e){return C=e,this},this.setDomainName=function(e){return n=e,this},this.useDisplayFeatures=function(e){return f=!!e,this},this.useAnalytics=function(e){return i=!!e,this},this.useEnhancedLinkAttribution=function(e){return m=!!e,this},this.useCrossDomainLinker=function(e){return s=!!e,this},this.setCrossLinkDomains=function(e){return t=e,this},this.setPageEvent=function(e){return k=e,this},this.setCookieConfig=function(e){return a=e,this},this.useECommerce=function(e,t){return p=!!e,h=!!t,this},this.setCurrency=function(e){return u=e,this},this.setRemoveRegExp=function(e){return e instanceof RegExp&&(o=e),this},this.setExperimentId=function(e){return r=e,this},this.ignoreFirstPageLoad=function(e){return v=!!e,this},this.trackUrlParams=function(e){return T=!!e,this},this.disableAnalytics=function(e){return g=!!e,this},this.setHybridMobileSupport=function(e){return b=!!e,this},this.startOffline=function(e){return _=!!e,!0===_&&this.delayScriptTag(!0),this},this.delayScriptTag=function(e){return d=!!e,this},this.logAllCalls=function(e){return y=!!e,this},this.enterTestMode=function(){return w=!0,this},this.enterDebugMode=function(e){return l=!0,E=!!e,this},this.readFromRoute=function(e){return S=!!e,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(D,A,x,P,O,L){var j=this,U=function(e,t){return angular.isObject(t)&&angular.isDefined(t[e])},q=function(e,t,n){return U(e,t)&&t[e]===n},R=function(e,t){return angular.isString(t)?t+"."+e:U("name",t)?t.name+"."+e:e},N={};S&&(L.has("$route")?N=L.get("$route"):x.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var $=function(){if(S&&N.current&&"pageTrack"in N.current)return N.current.pageTrack;var e=T?A.url():A.path();return o?e.replace(o,""):e},B=function(){var e={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},t={};return angular.forEach(A.search(),function(n,r){var o=e[r];angular.isDefined(o)&&(t[o]=n)}),t},M=function(e,t,n,r,o,i,a,c,s){var u={};return e&&(u.id=e),t&&(u.affiliation=t),n&&(u.revenue=n),r&&(u.tax=r),o&&(u.shipping=o),i&&(u.coupon=i),a&&(u.list=a),c&&(u.step=c),s&&(u.option=s),u},F=function(e){!i&&O._gaq&&"function"==typeof e&&e()},W=function(){var e=Array.prototype.slice.call(arguments);if(!0===_)return void j.offlineQueue.push([W,e]);O._gaq||(O._gaq=[]),!0===y&&j._log.apply(j,e),O._gaq.push(e)},Q=function(e){i&&O.ga&&"function"==typeof e&&e()},G=function(){var e=Array.prototype.slice.call(arguments);return!0===_?void j.offlineQueue.push([G,e]):"function"!=typeof O.ga?void j._log("warn","ga function not set on window"):(!0===y&&j._log.apply(j,e),void O.ga.apply(null,e))},V=function(t){var n=Array.prototype.slice.call(arguments,1),r=n[0],o=[];if("function"==typeof t?e.forEach(function(e){t(e)&&o.push(e)}):o=e,0===o.length)return void G.apply(j,n);o.forEach(function(e){U("select",e)&&"function"==typeof e.select&&!e.select(n)||(n[0]=R(r,e),G.apply(j,n))})};return this._log=function(){var e=Array.prototype.slice.call(arguments);if(e.length>0){if(e.length>1)switch(e[0]){case"debug":case"error":case"info":case"log":case"warn":x[e[0]](e.slice(1))}j.log.push(e)}},this._createScriptTag=function(){if(!e||e.length<1)return void j._log("warn","No account id set to create script tag");if(e.length>1&&(j._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),e=e.slice(0,1)),!0===c)return void j._log("warn","ga.js or analytics.js script tag already created");!0===g&&(j._log("info","Analytics disabled: "+e[0].tracker),O["ga-disable-"+e[0].tracker]=!0),W("_setAccount",e[0].tracker),n&&W("_setDomainName",n),m&&W("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),I&&!v&&(o?W("_trackPageview",$()):W("_trackPageview"));var t,r=D[0];return t=!0===f?("https:"===r.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===r.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",!0!==w?function(){var e=r.createElement("script");e.type="text/javascript",e.async=!0,e.src=t;var n=r.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}():j._log("inject",t),c=!0,!0},this._createAnalyticsScriptTag=function(){if(!e)return void j._log("warn","No account id set to create analytics script tag");if(!0===c)return void j._log("warn","ga.js or analytics.js script tag already created");!0===g&&e.forEach(function(e){j._log("info","Analytics disabled: "+e.tracker),O["ga-disable-"+e.tracker]=!0});var n=D[0],o=!0===b?"https:":"",i=o+"//www.google-analytics.com/"+(l?"analytics_debug.js":"analytics.js");if(!0!==w?function(e,t,n,r,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=r,a.parentNode.insertBefore(i,a)}(window,n,"script",i,"ga"):("function"!=typeof O.ga&&(O.ga=function(){j._log("debug","ga("+Array.prototype.slice.call(arguments).join()+")")}),j._log("inject",i)),E&&(O.ga_debug={trace:!0}),e.forEach(function(e){e.crossDomainLinker=U("crossDomainLinker",e)?e.crossDomainLinker:s,e.crossLinkDomains=U("crossLinkDomains",e)?e.crossLinkDomains:t,e.displayFeatures=U("displayFeatures",e)?e.displayFeatures:f,e.enhancedLinkAttribution=U("enhancedLinkAttribution",e)?e.enhancedLinkAttribution:m,e.set=U("set",e)?e.set:{},e.trackEcommerce=U("trackEcommerce",e)?e.trackEcommerce:p,e.trackEvent=!!U("trackEvent",e)&&e.trackEvent;var n={};U("fields",e)?n=e.fields:U("cookieConfig",e)?angular.isString(e.cookieConfig)?n.cookieDomain=e.cookieConfig:n=e.cookieConfig:angular.isString(a)?n.cookieDomain=a:a&&(n=a),!0===e.crossDomainLinker&&(n.allowLinker=!0),U("name",e)&&(n.name=e.name),e.fields=n,G("create",e.tracker,e.fields),!0===b&&G(R("set",e),"checkProtocolTask",null);for(var r in e.set)e.set.hasOwnProperty(r)&&G(R("set",e),r,e.set[r]);!0===e.crossDomainLinker&&(G(R("require",e),"linker"),angular.isDefined(e.crossLinkDomains)&&G(R("linker:autoLink",e),e.crossLinkDomains)),e.displayFeatures&&G(R("require",e),"displayfeatures"),e.trackEcommerce&&(h?(G(R("require",e),"ec"),G(R("set",e),"&cu",u)):G(R("require",e),"ecommerce")),e.enhancedLinkAttribution&&G(R("require",e),"linkid"),I&&!v&&G(R("send",e),"pageview",C+$())}),r){var d=n.createElement("script"),y=n.getElementsByTagName("script")[0];d.src=o+"//www.google-analytics.com/cx/api.js?experiment="+r,y.parentNode.insertBefore(d,y)}return c=!0,!0},this._ecommerceEnabled=function(e,t){var n=p&&!h;return!0===e&&!1===n&&(p&&h?j._log("warn",t+" is not available when Enhanced Ecommerce is enabled with analytics.js"):j._log("warn","Ecommerce must be enabled to use "+t+" with analytics.js")),n},this._enhancedEcommerceEnabled=function(e,t){var n=p&&h;return!0===e&&!1===n&&j._log("warn","Enhanced Ecommerce must be enabled to use "+t+" with analytics.js"),n},this._trackPage=function(e,t,n){e=e||$(),t=t||D[0].title,F(function(){W("_set","title",t),W("_trackPageview",C+e)}),Q(function(){var r={page:C+e,title:t};angular.extend(r,B()),angular.isObject(n)&&angular.extend(r,n),V(void 0,"send","pageview",r)})},this._trackEvent=function(e,t,n,r,o,i){F(function(){W("_trackEvent",e,t,n,r,!!o)}),Q(function(){var a={},c=function(e){return q("trackEvent",e,!0)};angular.isDefined(o)&&(a.nonInteraction=!!o),angular.isObject(i)&&angular.extend(a,i),angular.isDefined(a.page)||(a.page=$()),V(c,"send","event",e,t,n,r,a)})},this._addTrans=function(e,t,n,r,o,i,a,c,s){F(function(){W("_addTrans",e,t,n,r,o,i,a,c)}),Q(function(){if(j._ecommerceEnabled(!0,"addTrans")){V(function(e){return q("trackEcommerce",e,!0)},"ecommerce:addTransaction",{id:e,affiliation:t,revenue:n,tax:r,shipping:o,currency:s||"USD"})}})},this._addItem=function(e,t,n,r,o,i){F(function(){W("_addItem",e,t,n,r,o,i)}),Q(function(){if(j._ecommerceEnabled(!0,"addItem")){V(function(e){return q("trackEcommerce",e,!0)},"ecommerce:addItem",{id:e,name:n,sku:t,category:r,price:o,quantity:i})}})},this._trackTrans=function(){F(function(){W("_trackTrans")}),Q(function(){if(j._ecommerceEnabled(!0,"trackTrans")){V(function(e){return q("trackEcommerce",e,!0)},"ecommerce:send")}})},this._clearTrans=function(){Q(function(){if(j._ecommerceEnabled(!0,"clearTrans")){V(function(e){return q("trackEcommerce",e,!0)},"ecommerce:clear")}})},this._addProduct=function(e,t,n,r,o,i,a,c,s,u){F(function(){W("_addProduct",e,t,n,r,o,i,a,c,s)}),Q(function(){if(j._enhancedEcommerceEnabled(!0,"addProduct")){var l=function(e){return q("trackEcommerce",e,!0)},d={id:e,name:t,category:n,brand:r,variant:o,price:i,quantity:a,coupon:c,position:s};angular.isObject(u)&&angular.extend(d,u),V(l,"ec:addProduct",d)}})},this._addImpression=function(e,t,n,r,o,i,a,c){F(function(){W("_addImpression",e,t,n,r,o,i,a,c)}),Q(function(){if(j._enhancedEcommerceEnabled(!0,"addImpression")){V(function(e){return q("trackEcommerce",e,!0)},"ec:addImpression",{id:e,name:t,category:o,brand:r,variant:i,list:n,position:a,price:c})}})},this._addPromo=function(e,t,n,r){F(function(){W("_addPromo",e,t,n,r)}),Q(function(){if(j._enhancedEcommerceEnabled(!0,"addPromo")){V(function(e){return q("trackEcommerce",e,!0)},"ec:addPromo",{id:e,name:t,creative:n,position:r})}})},this._setAction=function(e,t){F(function(){W("_setAction",e,t)}),Q(function(){if(j._enhancedEcommerceEnabled(!0,"setAction")){V(function(e){return q("trackEcommerce",e,!0)},"ec:setAction",e,t)}})},this._trackTransaction=function(e,t,n,r,o,i,a,c,s){this._setAction("purchase",M(e,t,n,r,o,i,a,c,s))},this._trackRefund=function(e){this._setAction("refund",M(e))},this._trackCheckOut=function(e,t){this._setAction("checkout",M(null,null,null,null,null,null,null,e,t))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(e,t){-1!==["add","remove"].indexOf(e)&&(this._setAction(e,{list:t}),this._trackEvent("UX","click",e+("add"===e?" to cart":" from cart")))},this._promoClick=function(e){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",e)},this._productClick=function(e){this._setAction("click",M(null,null,null,null,null,null,e,null,null)),this._trackEvent("UX","click",e)},this._pageView=function(e){Q(function(){G(R("send",e),"pageview")})},this._send=function(){var e=Array.prototype.slice.call(arguments);e.unshift("send"),Q(function(){G.apply(j,e)})},this._set=function(e,t,n){Q(function(){G(R("set",n),e,t)})},this._trackTimings=function(e,t,n,r){Q(function(){V(void 0,"send","timing",e,t,n,r)})},this._trackException=function(e,t){Q(function(){V(void 0,"send","exception",{exDescription:e,exFatal:!!t})})},d||(i?this._createAnalyticsScriptTag():this._createScriptTag()),I&&P.$on(k,function(){(!S||N.current&&N.current.templateUrl&&!N.current.doNotTrack)&&j._trackPage()}),{log:j.log,offlineQueue:j.offlineQueue,configuration:{accounts:e,universalAnalytics:i,crossDomainLinker:s,crossLinkDomains:t,currency:u,debugMode:l,delayScriptTag:d,disableAnalytics:g,displayFeatures:f,domainName:n,ecommerce:j._ecommerceEnabled(),enhancedEcommerce:j._enhancedEcommerceEnabled(),enhancedLinkAttribution:m,experimentId:r,hybridMobileSupport:b,ignoreFirstPageLoad:v,logAllCalls:y,pageEvent:k,readFromRoute:S,removeRegExp:o,testMode:w,traceDebuggingMode:E,trackPrefix:C,trackRoutes:I,trackUrlParams:T},getUrl:$,setCookieConfig:j._setCookieConfig,getCookieConfig:function(){return a},createAnalyticsScriptTag:function(e){return e&&(a=e),j._createAnalyticsScriptTag()},createScriptTag:function(){return j._createScriptTag()},offline:function(e){if(!0===e&&!1===_&&(_=!0),!1===e&&!0===_)for(_=!1;j.offlineQueue.length>0;){var t=j.offlineQueue.shift();t[0].apply(j,t[1])}return _},trackPage:function(e,t,n){j._trackPage.apply(j,arguments)},trackEvent:function(e,t,n,r,o,i){j._trackEvent.apply(j,arguments)},addTrans:function(e,t,n,r,o,i,a,c,s){j._addTrans.apply(j,arguments)},addItem:function(e,t,n,r,o,i){j._addItem.apply(j,arguments)},trackTrans:function(){j._trackTrans.apply(j,arguments)},clearTrans:function(){j._clearTrans.apply(j,arguments)},addProduct:function(e,t,n,r,o,i,a,c,s,u){j._addProduct.apply(j,arguments)},addPromo:function(e,t,n,r){j._addPromo.apply(j,arguments)},addImpression:function(e,t,n,r,o,i,a,c){j._addImpression.apply(j,arguments)},productClick:function(e){j._productClick.apply(j,arguments)},promoClick:function(e){j._promoClick.apply(j,arguments)},trackDetail:function(){j._trackDetail.apply(j,arguments)},trackCart:function(e,t){j._trackCart.apply(j,arguments)},trackCheckout:function(e,t){j._trackCheckOut.apply(j,arguments)},trackTimings:function(e,t,n,r){j._trackTimings.apply(j,arguments)},trackTransaction:function(e,t,n,r,o,i,a,c,s){j._trackTransaction.apply(j,arguments)},trackException:function(e,t){j._trackException.apply(j,arguments)},setAction:function(e,t){j._setAction.apply(j,arguments)},pageView:function(){j._pageView.apply(j,arguments)},send:function(e){j._send.apply(j,arguments)},set:function(e,t,n){j._set.apply(j,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(e,t){return{restrict:"A",link:function(n,r,o){var i=t(o.gaTrackEvent);r.bind("click",function(){o.gaTrackEventIf&&!n.$eval(o.gaTrackEventIf)||i.length>1&&e.trackEvent.apply(e,i(n))})}}}])}(angular.module("angular-google-analytics",[])),function(e){var t=function(){function e(e,t){this.treesConfig=e,this.treeProperty=t,this.storage=localStorage,this._zoom=parseFloat(this.storage.getItem("defaultZoom"))||1,this._treeLayout="true"==this.storage.getItem("defaultTreeLayout"),this._treeSort=this.storage.getItem("defaultTreeSort")||"timestamp",this._treesSort=this.storage.getItem("defaultTreesSort")||this.treeProperty[this.treeProperty.modified],this._maxTreeDepth=parseInt(this.storage.getItem("defaultMaxTreeDepth"))||6,this._maxTreeBreadth=parseInt(this.storage.getItem("defaultMaxTreeBreadth"))||4,this._session_disabled="true"==this.storage.getItem("sessionDisabled"),this._hide_pinned="true"==this.storage.getItem("hidePinned"),this._hide_bookmarks="true"==this.storage.getItem("hideBookmarks"),this._hideLastTree="true"==this.storage.getItem("hideLastTree"),this._shareUrlWarningDisabled="true"==this.storage.getItem("shareUrlWarningDisabled"),this._reportGoogleDisabled="true"==this.storage.getItem("reportGoogleDisabled"),this._contentLanguage=this.storage.getItem("contentLanguage"),this._autoplayOff="true"==this.storage.getItem("autoplayOff"),this._announcement1="true"==this.storage.getItem("announcement1")}return Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this.storage.setItem("defaultZoom",e.toString()),this._zoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeLayout",{get:function(){return this._treeLayout},set:function(e){this.storage.setItem("defaultTreeLayout",e.toString()),this._treeLayout=e,this.treesConfig.treeCtrl.vertical=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeSort",{get:function(){return this._treeSort},set:function(e){this.storage.setItem("defaultTreeSort",e),this._treeSort=e,this.treesConfig.treeCtrl.sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treesSort",{get:function(){return this._treesSort},set:function(e){this.storage.setItem("defaultTreesSort",e),this._treesSort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeDepth",{get:function(){return this._maxTreeDepth},set:function(e){this.storage.setItem("defaultMaxTreeDepth",e.toString()),this._maxTreeDepth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTreeBreadth",{get:function(){return this._maxTreeBreadth},set:function(e){this.storage.setItem("defaultMaxTreeBreadth",e.toString()),this._maxTreeBreadth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionDisabled",{get:function(){return this._session_disabled},set:function(e){this.storage.setItem("sessionDisabled",e.toString()),this._session_disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidePinned",{get:function(){return this._hide_pinned},set:function(e){this.storage.setItem("hidePinned",e.toString()),this._hide_pinned=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideBookmarks",{get:function(){return this._hide_bookmarks},set:function(e){this.storage.setItem("hideBookmarks",e.toString()),this._hide_bookmarks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLastTree",{get:function(){return this._hideLastTree},set:function(e){this.storage.setItem("hideLastTree",e.toString()),this._hideLastTree=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareUrlWarningDisabled",{get:function(){return this._shareUrlWarningDisabled},set:function(e){this.storage.setItem("shareUrlWarningDisabled",e.toString()),this._shareUrlWarningDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reportGoogleDisabled",{get:function(){return this._reportGoogleDisabled},set:function(e){this.storage.setItem("reportGoogleDisabled",e.toString()),this._reportGoogleDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLanguage",{get:function(){return this._contentLanguage},set:function(e){this.storage.setItem("contentLanguage",e),this._contentLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoplayOff",{get:function(){return this._autoplayOff},set:function(e){this.storage.setItem("autoplayOff",e.toString()),this._autoplayOff=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"announcement1",{get:function(){return this._announcement1},set:function(e){this.storage.setItem("announcement1",e.toString()),this._announcement1=e},enumerable:!0,configurable:!0}),e}();e.value("UserSettingsStatic",t),e.value("animationEase","cubic-in-out").value("animationDuration",850),e.value("debug_data",!1).value("debug_mode",!1);var n;!function(e){e[e.str=0]="str",e[e.date=1]="date",e[e.rating=2]="rating",e[e.count=3]="count"}(n||(n={})),e.value("propertyType",n),angular.module("tnConfig").factory("placeholderImage",["$rootScope","trustAsResourceUrlFilter",function(e,t){return e.placeholderImage=t("img/default-placeholder.png"),e.placeholderImage}]),angular.module("tnConfig").value("placeholderUserImage","https://thebenclark.files.wordpress.com/2014/03/facebook-default-no-profile-pic.jpg").value("analyticsDialog",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/analytics-dialog.html",controller:"AnalyticsDialog",controllerAs:"analyticsDialog",onComplete:function(e){e.analyticsDialog.onload()}}),e.factory("nodesConfig",["propertyType",function(e){var t={},n=t.index={};return t.store="nodes",t.type={title:e.str,image:e.str,type:e.str,locked_image:e.str,visited:e.date,favicon:e.str,views:e.count,description:e.str,address:e.str},n[r[r.title]]={key:o[r.title],options:{unique:!1,multiEntry:!1}},n[r[r.visited]]={key:o[r.visited],options:{unique:!1,multiEntry:!1}},t.listCtrl={sortBy:r[r.visited],sortOrder:!1,searchText:"",selectedText:null,disableSort:!1,getSelectedText:function(){return this.selectedText},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},getText:function(){var e=this.getSelectedText();return e?e.text:this.getSearchText()},isSearch:function(){return!(!this.getSelectedText()&&!this.getSearchText())},type:{visited:t.type.visited,title:t.type.title},clearSearch:function(){this.searchText="",this.selectedText=null}},t}]);var r;!function(e){e[e.title=0]="title",e[e.image=1]="image",e[e.type=2]="type",e[e.locked_image=3]="locked_image",e[e.visited=4]="visited",e[e.favicon=5]="favicon",e[e.description=6]="description",e[e.tags=7]="tags",e[e.rss=8]="rss",e[e.geo=9]="geo",e[e.address=10]="address",e[e.isArticle=11]="isArticle",e[e.url=12]="url",e[e.facebook_id=13]="facebook_id",e[e.color=14]="color",e[e.og_image=15]="og_image",e[e.lang=16]="lang"}(r||(r={}));var o;!function(e){e[e.n=0]="n",e[e.i=1]="i",e[e.t=2]="t",e[e.l=3]="l",e[e.v=4]="v",e[e.f=5]="f",e[e.d=6]="d",e[e.k=7]="k",e[e.r=8]="r",e[e.g=9]="g",e[e.a=10]="a",e[e.c=11]="c",e[e.u=12]="u",e[e.b=13]="b",e[e.o=14]="o",e[e.m=15]="m",e[e.e=16]="e"}(o||(o={})),angular.module("tnConfig").value("nodeDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-dialog.html",controller:"NodeDialogCtrl",controllerAs:"vm",onComplete:function(e,t){t.find("#dialogContent_node-dialog").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("#dialogContent_node-dialog").mCustomScrollbar("destroy")}}).value("relatedDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,controller:function(){this.loading=!0},controllerAs:"relatedDialogCtrl",bindToController:!0,templateUrl:"partials/shared/related-dialog.html",onComplete:function(e,t){t.find("md-content").mCustomScrollbar({theme:"minimal-dark"})},onRemoving:function(e){e.find("md-content").mCustomScrollbar("destroy")}}).value("nodeUrlDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/node-url-dialog.html",controllerAs:"vm"}).value("nodesProperties",r).value("nodesShortProperties",o),e.value("SCOPES",["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.email"]).value("API_KEY","AIzaSyCHbESTG-Tt_cir4j6swhSe73MmNxOMdAI").value("SECONDARY_API_KEY","AIzaSyAVFXhdstGRYa40dbjNhJmzKx4ASVrBpuA").value("DISQUS_FORUM","brancher").value("DISQUS_API_KEY","VGVs0rDj4Weg7I5d42NNgIukCqMhFv3PQQkh4WACRZJvvXEWzBXV0zUyTOfb7uMt").value("FB_ID","1099461436740953").value("FB_SCOPES",["user_friends"]).value("EBAY_CAMPID","5338007501").value("AMAZON_ID","brancher0b-20").value("ALIBABA_ID","928268164").value("ITUNES_TOKEN","").value("GOOGLE_OPTIMIZE_CODE","GTM-M56ZPVZ").factory("BUFFER_ID",["debug_mode",function(e){return e?"59c86e67aa7cc01b6bf6a1bc":"59c859ee285dcfbc478fcdee"}]).factory("BUFFER_REDIRECT_URI",["BASE_URL",function(e){return e+"/buffer"}]).constant("ANALYTICS_TRACKING_ID","UA-87007310-1").constant("GOOGLE_AD_CLIENT","ca-pub-4049546790962842").value("EXTENSION_ID","undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id||"dfanhpdcmhemhkjafmannijhneiplgec").value("CLIENT_ID","988709185566-o0jm430od2s08urqnsujfnli5a6572is.apps.googleusercontent.com").factory("BASE_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://brancher.io"}]).factory("BASE_API_URL",["debug_mode",function(e){return e?"http://localhost:8080":"https://getbrancher.appspot.com"}]).factory("BASE",["BASE_API_URL",function(e){return e+"/_ah/api"}]).factory("EXTENSION_URL",["EXTENSION_ID",function(e){return"https://chrome.google.com/webstore/detail/"+e}]).factory("STORAGE_URL",["BASE_API_URL",function(e){return e+".storage.googleapis.com/"}]),e.factory("treesConfig",["$rootScope","UserSettingsStatic","propertyType",function(e,t,n){var r={},o=e.userSettings=new t(r,i),c=r.index={},s=localStorage;return r.store="trees",r.MAX_CHILDREN=100,r.checkOverQuota=function(){var e=s.getItem("overQuotaNotification");return!e||+new Date-+new Date(e)>864e5},r.setOverQuota=function(){s.setItem("overQuotaNotification",(new Date).toISOString())},c[i[i.children]]={key:a[i.children],options:{unique:!1,multiEntry:!0}},c[i[i.created]]={key:a[i.created],options:{unique:!0,multiEntry:!1}},c[i[i.modified]]={key:a[i.modified],options:{unique:!0,multiEntry:!1}},c[i[i.title]]={key:a[i.title],options:{unique:!1,multiEntry:!1}},e.groupCtrl=r.groupCtrl={sortBy:o.treesSort,sortOrder:!1,disableSort:!1,treesSearch:{selectedNode:null,searchText:"",getSelectedNode:function(){return this.selectedNode},getSearchText:function(){var e=this.searchText;if(e&&e.length>=3)return e},isSearch:function(){return!(!this.getSelectedNode()&&!this.getSearchText())},clear:function(){this.selectedNode=null,this.searchText=""},getText:function(){var e=this.getSelectedNode();return e?e.text:this.getSearchText()}},type:{created:n.date,modified:n.date,title:n.str,rating:n.rating,description:n.str,count:n.str,addedCount:n.count,views:n.count},updateSort:function(){var e=this,t=e.sortBy,r=e.sortOrder;switch(this.type[t]){case n.date:this.reverse=!r;break;case n.str:this.reverse=r;break;case n.rating:this.reverse=!0}}},r.treeCtrl={sortBy:o.treeSort,sortOrder:!1,vertical:o.treeLayout,isListed:!1,isExpanded:!1,type:{visited:n.date,timestamp:n.date,title:n.str},data:{visited:!0,timestamp:!1,title:!0}},e.groupCtrl.updateSort(),r}]);var i;!function(e){e[e.created=0]="created",e[e.modified=1]="modified",e[e.title=2]="title",e[e.description=3]="description",e[e.children=4]="children",e[e.parents=5]="parents",e[e.timestamps=6]="timestamps",e[e.original=7]="original",e[e.image=8]="image",e[e.favorite=9]="favorite",e[e.tags=10]="tags",e[e.seen=11]="seen",e[e.domains=12]="domains",e[e.lang=13]="lang"}(i||(i={}));var a;!function(e){e[e.t=0]="t",e[e.m=1]="m",e[e.n=2]="n",e[e.d=3]="d",e[e.c=4]="c",e[e.p=5]="p",e[e.s=6]="s",e[e.o=7]="o",e[e.i=8]="i",e[e.f=9]="f",e[e.g=10]="g",e[e.e=11]="e",e[e.a=12]="a",e[e.l=13]="l"}(a||(a={}));var c;!function(e){e[e.tree=0]="tree",e[e.link=1]="link",e[e.image=2]="image"}(c||(c={})),angular.module("tnConfig").value("treeProperty",i).value("treeShortProperty",a).value("linkEvent",c).value("dialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-dialog.html",controller:"TreeDialogCtrl",controllerAs:"vm"}).value("userImagesDialogConfig",{controller:"UserImagesDialogCtrl",controllerAs:"userImagesDialog",templateUrl:"partials/shared/user-images-dialog.html",hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,onComplete:function(e,t){t.find("#dialog-container").mCustomScrollbar(e.scrollConfig)},onRemoving:function(e){e.find("#dialog-container").mCustomScrollbar("destroy")}}).value("mapDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/map-dialog.html",controllerAs:"mapDialogCtrl",controller:["$scope","$timeout","$controller","maps","geolocation","geoNodes","title",function(e,t,n,r,o,i,a){e.mapDialogCtrl.title=a,t(function(){return n("MapDialogCtrl",{$scope:e,maps:r,geolocation:o,geoNodes:i})},850)}]}).value("reportDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/report-dialog.html",controller:"ReportDialogCtrl",controllerAs:"vm"}).value("subscriptionsDialogConfig",{hasBackdrop:!0,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/components/subscriptions-dialog.html",controller:"SubscriptionsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("treeEditorsDialogConfig",{hasBackdrop:!1,disableParentScroll:!0,clickOutsideToClose:!0,templateUrl:"partials/shared/tree-editors-dialog.html",controller:"TreeEditorsDialogCtrl",controllerAs:"vm",onComplete:function(e,t){e.vm.$element=t,e.vm.onload()},onRemoving:function(e){e.find("md-dialog-content").mCustomScrollbar("destroy")}}).value("overQuotaNotification",{type:"basic",iconUrl:"img/icon128-disabled.png",title:"Storage quota exceeded!",message:"You have reached the maximum number of trees for a free user",contextMessage:"Please, upgrade to pro-account for the unlimited storage",requireInteraction:!0}).factory("deleteTreeConfirmDialog",["$mdDialog",function(e){return function(t){return e.confirm().title("Are you sure?").textContent("This tree will be deleted.").ariaLabel("Delete tree").targetEvent(t).ok("OK").cancel("Cancel")}}])}(angular.module("tnConfig",[])),function(e){e.config(["AnalyticsProvider","ANALYTICS_TRACKING_ID",function(e,t){e.setAccount(t).trackPages(!1).useDisplayFeatures(!1).useCrossDomainLinker(!1).useECommerce(!1,!1).useEnhancedLinkAttribution(!1)}])}(angular.module("tnAnalytics",["angular-google-analytics","tnConfig"])),function(e){e.config(["AnalyticsProvider",function(e){e.setHybridMobileSupport(!0)}])}(angular.module("tnExtensionClient",["tnAnalytics"])),function(e){e.service("chromeRuntime",["$rootScope","$q","EXTENSION_ID",function(e,t,n){var r=this,o=chrome.runtime;o.onMessage.addListener(function(t,n,r){return e.$emit(t.type,t,n,r),!0}),r.sendMessage=function(e){var r=t.defer();return o.sendMessage(n,e,function(e){var t=o.lastError||e&&e.error;t?r.reject(t):r.resolve(e)}),r.promise}}])}(angular.module("tnChromeShared",["tnConfig"])),function(e){e.value("URI",n(1)),e.factory("uriParser",["URI","AMAZON_ID","EBAY_CAMPID","ITUNES_TOKEN",function(e,t,n,r){function o(e){return"amazon"==e}function i(e){return"ebay"==e}function a(e){return"itunes.apple.com"==e||"geo.itunes.apple.com"==e}var c={},s=e("http://rover.ebay.com/rover/1/711-53200-19255-0/1"),u={google:"q",yahoo:"p",bing:"q",yandex:"text",duckduckgo:"q"},l={google:"/search",yahoo:"/search",bing:"/search",yandex:"/search/",duckduckgo:""},d={google:"www.google.com",yahoo:"www.yahoo.com",bing:"www.bing.com",yandex:"www.yandex.com",duckduckgo:"www.duckduckgo.com"},f={google:"https://www.google.com.ua/images/branding/product/ico/googleg_lodp.ico",yahoo:"https://www.google.com/s2/favicons?domain=www.yahoo.com",bing:"https://www.google.com/s2/favicons?domain=www.bing.com",yandex:"https://www.google.com/s2/favicons?domain=www.yandex.com",duckduckgo:"https://www.google.com/s2/favicons?domain=www.duckduckgo.com"},g=["/","/feed/subscriptions","/feed/trending","/feed/history","/dashboard","/my_videos","/view_all_playlists","/live_dashboard_splash","/my_live_events","/analytics","/timedtext_cs_queue","/upload"];return c.parseSERP=function(t){var n,r=t.domain(),o=t.host(),i={};if(i.isSERP=!1,-1!=r.indexOf("google")&&-1!=o.indexOf("www.google")?i.SE="google":-1!=r.indexOf("yahoo.com")?"www.yahoo.com"!=o&&-1==o.indexOf("search")||(i.SE="yahoo"):-1!=r.indexOf("bing.com")?i.SE="bing":-1!=o.indexOf("www.yandex")?i.SE="yandex":-1!=r.indexOf("duckduckgo")&&(i.SE="duckduckgo"),n=i.SE){var a=t.query(!0),c=t.fragment(),s=u[n];i.isSERP=!0,i.favicon=f[n],angular.merge(a,e.parseQuery(c));var g=a[s];if(g){i.title=e.decodeQuery(g);(i.query={})[s]=g,i.path=l[n],i.hostname=d[n]}}return i},c.parseImg=function(t,n){if(t){if("data:image"==t.slice(0,10))return t;var r=e(t.trim());return r.protocol()?t:(r.is("absolute")?r.protocol(n.protocol()):r.is("relative")&&(r=n.clone().path(t)),r.toString())}},c.applySERP=function(t,n,r){var o=r&&r.value;if(n.isSERP){if(!n.query)return e("");r&&(r.value={type:"web search",title:n.title.charAt(0).toUpperCase()+n.title.substring(1),image:o&&o.image,favicon:n.favicon,description:o&&o.description}),t.fragment("").hostname(n.hostname).search(n.query).path(n.path)}return t},c.sortQuery=function(e){var t=e.search(!0);e.search(""),angular.forEach(Object.keys(t).sort(),function(n){e.addSearch(n,t[n])})},c.isAffiliate=function(e){var t=e.domain().split(".")[0];return o(t)||i(t)||a(e.host())},c.makeAffiliateLink=function(e){var c=e.domain().split(".")[0],u=e;if(o(c)){var l=e.path().split("/"),d=e.query(!0);"s"==l[1]?e.path("/s").fragment("").query({url:"search-alias=aps","field-keywords":d["field-keywords"]}):(e.query("").fragment(""),"ref"==l[l.length-1].slice(0,3)&&e.path(l.slice(0,l.length-1).join("/"))),u=e.removeSearch("tag").addSearch("tag",t)}else if(i(c)){var f=e.host().split(".");u="rover"==f[0]?e.setSearch("campid",n).setSearch("toolid","10001"):s.clone().query({mpre:e.toString(),campid:n,toolid:"10001"})}else if(a(e.host())){var d=e.query(!0),g=d.i,p=d.mt,h={at:r};g&&(h.i=g),p&&(h.mt=p),u=e.host("geo.itunes.apple.com").query(h).fragment("")}return u},c.parseFacebook=function(t){if("www.facebook.com"==t.host()){var n=t.path(),r=n.split("/").filter(function(e){return!!e});if(!n||"/"==n||"/dialog/share"==n||"/photo.php"==n||"feed"==r[0]||"photos"==r[1])return e("");var o=t.query(!0),i=o.id,a=o.q;if(t.query(""),i&&t.addSearch("id",i),a&&t.addSearch("q",a),!i&&!a){var c="pg"==r[0];if("groups"==r[0]||"events"==r[0]||c)if(c)t.path("/"+r[1]);else{if(!r[1])return e("");t.path("/"+r[0]+"/"+r[1])}else t.path("/"+r[0])}}return t},c.parseYoutube=function(t){if("www.youtube.com"==t.host()){var n=t.path(),r=n.split("/").filter(function(e){return!!e});if(!n||g.indexOf(n)>-1)return e("");var o=t.query(!0),i=o.v,a=o.list,c=o.search_query||o.q;t.query(""),i&&t.addSearch("v",i),!i&&a&&t.addSearch("list",a),c&&t.addSearch("search_query",c),("user"==r[0]||"channel"==r[0])&&r.length>2&&t.path("/"+r[0]+"/"+r[1])}return t},c.parse=function(t,n){if("http"!=t.protocol().slice(0,4)||"jpg"==t.suffix()||"plus.google.com"==t.host()&&"/share"==t.path())return e("");var r=c.parseSERP(t);return t.removeSearch("brancher.io").normalize(),t=c.parseFacebook(t),t=c.parseYoutube(t),t=c.applySERP(t,r,n),c.sortQuery(t),t},c.getFacebookId=function(e){var t=e.path().split("/").filter(function(e){return!!e}),n="search"!=t[0]&&t[t.length-1];return e.query(!0).id||n},c}])}(angular.module("URIjs",[])),function(e){e.service("chromeIdentity",["$q","URI",function(e,t){var n=this,r=chrome.identity,o=chrome.runtime;n.launchWebAuthFlow=function(n,i){void 0===i&&(i=!1);var a=e.defer(),c={interactive:i,url:n};return r.launchWebAuthFlow(c,function(e){if(o.lastError)a.reject();else{var n=t(e).fragment(),r=t.parseQuery(n);r.access_token?a.resolve(r):a.reject()}}),a.promise},n.getAuthToken=function(t,n){if(void 0===t&&(t=!1),!r)return e.when("");var i=e.defer(),a={interactive:t};return n&&(a.scopes=n),r.getAuthToken(a,function(e){o.lastError?i.reject():i.resolve(e)}),i.promise},n.removeCachedAuthToken=function(t){var n=e.defer();return r.removeCachedAuthToken({token:t},function(){return n.resolve()}),n.promise},n.logout=function(t){var n=e.defer(),o={interactive:!0,url:t};return r.launchWebAuthFlow(o,function(){return n.resolve()}),n.promise},n.getRedirectURL=function(e){return r.getRedirectURL(e)}}]),e.service("chromeNotifications",["$q","$rootScope",function(e,t){var n=this,r=chrome.notifications;r.onClicked.addListener(function(e){t.$emit("notification:click",e)}),n.create=function(t,n){var o=e.defer();return r.getPermissionLevel(function(e){"granted"==e?r.create(t,n,function(){return o.resolve()}):o.reject()}),o.promise}}]),e.service("chromeTabs",["$q","URI","uriParser",function(e,t,n){function r(e){return e.id}function o(r){var o=[],i=[];if(r)return r.forEach(function(e){if(e.url&&"http"==e.url.slice(0,4)&&!u.test(e.url)){var r=s.executeScript(e.id,"content_scripts/canonical.js").then(function(t){return e.url=t||e.url},angular.noop).finally(function(){return e.url=n.parse(t(e.url).normalize()).toString()});i.push(e),o.push(r)}}),e.all(o).then(function(){return i})}var i=chrome.tabs,a=chrome.windows,c=chrome.runtime,s=this,u=new RegExp("://chrome.google.com/webstore");s.getCurrent=function(){var t=e.defer();return i.getCurrent(function(e){return t.resolve(e)}),t.promise},s.create=function(e,t,n){void 0===t&&(t=e),s.query(t).then(function(t){if(t)s.highlightWindow(t.windowId),i.highlight({tabs:t.index,windowId:t.windowId},angular.noop);else{var r={url:e};angular.isNumber(n)&&(r.windowId=n,s.highlightWindow(n)),i.create(r)}})},s.query=function(n){var r=e.defer();return i.query({},function(e){return r.resolve(e)}),r.promise.then(o).then(function(e){if(n){for(var r=t(n),o=void 0,i=0;i<e.length;i+=1)if(r.equals(e[i].url)){o=e[i];break}return o}return e})},s.remove=function(t){var n=e.defer();return i.remove(t,function(){return n.resolve()}),n.promise},s.highlight=function(t){var n=e.defer();return i.highlight({tabs:t.index,windowId:t.windowId},function(){return n.resolve(t.windowId)}),n.promise},s.highlightWindow=function(t){var n=e.defer();return a.update(t,{focused:!0},function(){return n.resolve()}),n.promise},s.reload=function(t){var n=e.defer();return i.reload(t,null,function(){return n.resolve()}),n.promise},s.getWindow=function(t){var n=e.defer();return a.get(t,function(e){return n.resolve(e)}),n.promise},s.createWindow=function(t){var n=e.defer();return a.create(t,function(e){return n.resolve(e)}),n.promise},s.getTabs=function(n){var r=e.defer(),o=n.map(function(e){return t(e)});return s.query().then(function(e){r.resolve(e&&e.filter(function(e){return o.some(function(t){return t.equals(e.url)})}))}),r.promise},s.getWindowURIs=function(n){var r=e.defer();return a.get(n,{populate:!0},function(e){return r.resolve(e.tabs)}),r.promise.then(o).then(function(e){return e.map(function(e){return t(e.url)})})},s.openTabs=function(t,n){function r(n){var r=[];return t.forEach(function(t){var o=e.defer();r.push(o.promise),i.create({windowId:n,url:t},function(){return o.resolve()})}),e.all(r).then(function(){return n})}return angular.isNumber(n)?s.highlightWindow(n).then(function(){return r(n)}):s.createWindow({focused:!0}).then(function(t){var n=t.tabs[0].id;return r(t.id).then(function(t){var r=e.defer();return i.remove(n,function(){return r.resolve()}),r.promise.then(function(){return t})})})},s.closeTabs=function(t){var n=e.defer();return s.getTabs(t).then(function(e){i.remove(e.map(r),function(){return n.resolve()})}),n.promise},s.moveTabs=function(t,n){function o(e,t){if(!e||!e.length)return a.resolve(t);i.move(e.map(r),{windowId:t,index:-1},function(){return a.resolve(t)})}var a=e.defer();return s.getTabs(t).then(function(e){if(!e||!e.length)return a.resolve(n);angular.isNumber(n)?(s.highlightWindow(n),o(e.filter(function(e){return e.windowId!=n}),n)):s.createWindow({focused:!0,tabId:e[0].id}).then(function(t){return o(e.slice(1),t.id)})}),a.promise},s.executeScript=function(t,n,r,o){void 0===r&&(r=0);var a=e.defer(),s={runAt:"document_idle",frameId:r};return n?s.file=n:s.code=o,i.executeScript(t,s,function(e){c.lastError?a.reject(c.lastError):(e=e||[],a.resolve(e[0]))}),a.promise},s.insertCSS=function(t,n,r){void 0===r&&(r=0);var o=e.defer(),a={file:n,runAt:"document_idle",frameId:r};return i.insertCSS(t,a,function(){return o.resolve()}),o.promise},s.executeScripts=function(t,n,r){void 0===r&&(r=0);var o=e.when();return n.forEach(function(e){o=o.then(function(){return s.executeScript(t,e,r)})}),o},s.getTab=function(t){var n=e.defer();return i.get(t,function(e){return n.resolve(e)}),n.promise},s.openApp=function(){i.create({url:"control.html"})},s.reloadApp=function(e){i.update(e,{url:"control.html"})}}])}(angular.module("tnChrome",["tnChromeShared","URIjs"])),function(e){e.config(["$mdThemingProvider","$mdIconProvider",function(e,t){t.defaultIconSet("img/icons.svg"),e.theme("default").backgroundPalette("grey",{default:"50"}).primaryPalette("teal",{default:"200"}).accentPalette("pink")}]).run(["$rootScope",function(e){e.theming={topbar:{backgroundColor:"background-300",borderColor:"background-900-.27"}}}]).value("nodeColorExpression",{backgroundColor:"default-background-100"}).value("nodeRelatedColorExpression",{backgroundColor:"default-primary-200"}).value("nodeSearchResultColorExpression",{backgroundColor:"default-accent-300"}).factory("nodeLinkDefaultColor",["$mdColors",function(e){return e.getThemeColor("default-accent-600")}])}(angular.module("tnTheming",["ngMaterial"])),function(e){e.service("ignoreListService",["URI",function(e){function t(e){r.setItem("ignoreList",e.join(" "))}var n=this,r=localStorage;n.getList=function(){var e=r.getItem("ignoreList");return e?e.split(" "):[]},n.addItem=function(r){var o=n.getList();if(r){-1===r.indexOf("//")&&(r="//"+r);var i=e(r).host();-1===o.indexOf(i)&&(o.push(i),t(o))}},n.removeItem=function(e){var r=n.getList(),o=r.indexOf(e);o>-1&&(r.splice(o,1),t(r))},n.hasItem=function(t){return-1!==n.getList().indexOf(e(t).host())},n.removeUrl=function(t){n.removeItem(e(t).host())}}])}(angular.module("tnIgnoreList",["URIjs"])),function(e){"use strict";e.service("debounce",["$timeout",function(e){return function(t,n,r,o){function i(){s=this,c=arguments;var i=function(){a=null,r||(u=t.apply(s,c))},l=r&&!a;return a&&e.cancel(a),a=e(i,n,o),l&&(u=t.apply(s,c)),u}var a,c,s,u;return i.cancel=function(){e.cancel(a),a=null},i}}]).directive("debounce",["debounce","$parse",function(e,t){return{require:"ngModel",priority:999,link:function(n,r,o,i){var a,c,s=t(o.debounce)(n),u=!!t(o.immediate)(n),l=i.$render.bind(i),d=e(function(e){c=!0,i.$$lastCommittedViewValue=a,i.$setViewValue(e),c=!1},parseInt(s,10),u);i.$render=function(){l(),d.cancel(),a=this.$viewValue},i.$parsers.unshift(function(e){return c?(a=e,e):(d(i.$viewValue),a)})}}}])}(angular.module("debounce",[])),function(e){e.run(["Analytics",function(e){e.set("hostname","popup.chrome"),e.trackPage("/popup")}]),setTimeout(function(){return angular.bootstrap(document.body,["popup"])}),e.controller("PopupCtrl",["$q","$window","$rootScope","Analytics","chromeRuntime","chromeTabs","ignoreListService","debounce",function(e,t,n,r,o,i,a,c){var s,u,l,d=this;d.clickTreeDisabled=!0,d.ignoreDomainDisabled=!0,d.favoriteDisabled=!0,d.publishDomainDisabled=!0,d.open=function(){i.openApp()},d.sessionChange=function(){r.trackEvent("popup","session",""),o.sendMessage({type:"event:session"})},d.clickTree=c(function(){i.insertCSS(s,"page.css").then(function(){return i.executeScripts(s,["content_scripts/close-tree.js","content_scripts/page.js"])}).then(function(){return t.close()})},1e3,!0),d.ignoreDomain=c(function(){d.domainIgnored=!d.domainIgnored,d.domainIgnored?a.addItem(u):a.removeUrl(u)},1e3,!0),d.publishDomain=c(function(){o.sendMessage({type:"event:publish",value:u,publish:!d.domainPublished}).then(function(e){e||(d.domainPublished=!d.domainPublished)})},1e3,!0),d.toggleFavorite=c(function(){o.sendMessage({type:"event:favorite",value:u,favorite:!d.favorite}).then(function(e){e||(d.favorite=!d.favorite)})},1e3,!0),n.$on("popup:nodes",function(e,t,n,r){r({nodes:l,url:u})}),o.sendMessage({type:"get:session"}).then(function(e){return d.sessionEnabled=e}),chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){var n=t&&t[0];n&&n.url&&"http"==n.url.slice(0,4)&&(s=n.id,u=n.url,d.clickTreeDisabled=!1,i.executeScript(s,"content_scripts/canonical.js").then(function(t){var n=e.when();u=t||u,d.domainIgnored=a.hasItem(u),d.ignoreDomainDisabled=!1,d.domainIgnored||(n=o.sendMessage({type:"popup:related",value:u}).then(function(e){e&&e.nodes&&e.nodes.length&&(l=e.nodes,i.executeScript(s,"content_scripts/related.js"),i.insertCSS(s,"related.css"))})),n.then(function(){return o.sendMessage({type:"popup:tree",value:u})}).then(function(e){return d.clickTreeDisabled=!e}).then(function(){if(!d.domainIgnored)return o.sendMessage({type:"popup:domain",value:u})}).then(function(e){d.domainIgnored||(d.publishDomainDisabled=!1,d.domainPublished=e)}).then(function(e){return o.sendMessage({type:"popup:node",value:u})}).then(function(e){d.favoriteDisabled="disable"==e,d.favoriteDisabled||(d.favorite=e)})}))}),t.addEventListener("unload",function(){chrome.extension.getBackgroundPage().closeRelatedNodesPopup(s)})}])}(angular.module("popup",["ngMaterial","tnExtensionClient","tnChrome","tnTheming","tnIgnoreList","debounce"]))},function(e,t,n){e.exports=n(0)(6)},function(e,t,n){e.exports=n(0)(11)},function(e,t,n){e.exports=n(0)(17)},function(e,t,n){e.exports=n(0)(18)}]);